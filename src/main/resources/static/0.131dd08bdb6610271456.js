(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"y+Kn":function(e,t,o){"use strict";o.r(t);var r=o("iPnF"),a=o("Irj7"),n=o("acGC"),i=o("7YPV"),l=o("OEID"),s=o("Awrb"),c=o("v66I"),d=o("Ztfu"),h=o("MIw+"),g=o("qRpk"),b=[{initialAttr:function(){return{opacity:0}},finalAttr:function(){return{opacity:1}}}],p={"initial.dataset.entities":function(){return{"path.appearing":()=>(b[0].slot="plot",b),"path.updating":e=>[{finalAttr:function(){return e.finalAttr}}],"labelConnectors.appearing":()=>(b[0].slot="final",b),"labelConnectors.updating":null,"entityLabel.appearing":()=>[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}],"*":null}},"initial.dataset.markers":function(){return{markers:null,"markerItem.appearing":()=>(b[0].slot="final",b),"markerItem.updating":e=>[{finalAttr:function(){return e.finalAttr}}]}},"initial.group.mapGroup":function(){return{"group.appearing":e=>[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}],"group.updating":e=>[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}],"*":null}}},u=o("NamR");let f,m=Object(g.b)("redraphael","plugin"),v=window.navigator.userAgent,y=/msie/i.test(v)&&!window.opera,C=",",k="",O="top",x="bottom",w="right",F="left",j="middle",L="center",A="crisp",E=window.Math,S=E.min,_=E.max,I=/stroke/gi,T=/AppleWebKit/.test(v),P=E.ceil,R=function(e,t){let o=t?Object(s.V)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=s.pb,o},M=function(e,t){let o,r={};if(t=t||1,!e||"object"!=typeof e)return r;for(o in e)I.test(o)||("stroke-width"===o?(r[o]=+e[o]/t,T&&(r[o]=r[o]&&P(r[o])||0)):r[o]=e[o]);return r},B={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*S(t,e-t)}},D={top:function(){return arguments[1]},middle:function(e,t){return 2*S(t,e-t)},bottom:function(e,t){return e-t}},V=function(e){let t,o=e&&e.length||0,r={};for(;o--;)(t=e[o]).id!==f&&(r[t.id.toLowerCase()]=t);return r};var N,G,H,W,z,X,K,Y,U,J,Z;Object(g.a)({name:"mapsAnimation",type:"animationRule",extension:p}),N=m,z=window.parseFloat,X=N._createNode,K=N._setFillAndStroke,Y=N.el.constructor,U={Q:"L",Z:"X",q:"l",z:"x",",":" "},J=/,?([achlmqrstvxz]),?/gi,Z=function(){return this.join(",").replace(J,G)},N.svg?(G="$1",H=function(){var e=N.is(arguments[0],"array")?arguments[0]:Array.prototype.slice.call(arguments);e?"string"==typeof e?e=e.replace(J,G):e.toString=Z:e="M0,0",this.node.setAttribute("d",e.toString())},N._engine.litepath=function(e,t,o,r,a){var n,i=X("path");return(r||t).canvas.appendChild(i),(n=new Y(i,t,r)).type="litepath",n.id=i.raphaelid=N._oid++,i.raphael=!0,K(n,a||{fill:"none",stroke:"#000"}),n},N._getPath.litepath=function(e){return N.parsePathString(e.node.getAttribute("d"))}):N.vml&&(G=function(e,t){return U[t]||t},W=function(){var e=this;return e._transform.apply(e,arguments),e._.bcoord&&(e.node.coordsize=e._.bcoord),e},H=function(e){return e?"string"==typeof e?e=e.replace(J,G):e.toString=Z:e="M0,0",this.node.path=e,this},N._engine.litepath=function(e,t,o,r,a){var n,i=X("shape"),l=i.style,s=new Y(i,t,r);return l.cssText="position:absolute;left:0;top:0;width:21600px;height:21600px;",o=z(o),isNaN(o)?i.coordsize="21600 21600":(s._.bzoom=o,l.width="1px",l.height="1px",i.coordsize=s._.bcoord=o+" "+o),i.coordorigin=t.coordorigin,s.type="litepath",s.id=i.raphaelid=N._oid++,i.raphael=!0,s._transform=s.transform,s.transform=W,N._setFillAndStroke(s,a||{fill:"none",stroke:"#000"}),(r||t).canvas.appendChild(i),(n=X("skew")).on=!0,i.appendChild(n),s.skew=n,s},N._getPath.litepath=function(e){return N.parsePathString(e.node.path||"")}),N.fn.litepath=function(e,t,o){var r,a,n;return"object"==typeof e&&e.constructor!==Y&&(r=e,a=(e=e.litepath).zoom,o=e.group),t&&t.constructor===Y?(o=t,a=void 0):a=t,e&&e.constructor===Y&&(o=e,e=""),(n=N._engine.litepath(e,this,a,o,r)).ca.litepath=H,e&&n.attr("litepath",N.is(e,"array")?[e]:e),this.__set__&&this.__set__.push(n),this._elementsById[n.id]=n};class q extends a.a{constructor(){super(),this.components={}}getName(){return"entities"}getType(){return"dataset"}configureAttributes(e){if(!e)return;this.JSONData={data:e};let t,o,r,a,n,i,l,c,d=this,h=d.getFromEnv("chart").jsonData,g=d.config,b=h.map||h.chart,p=[],u=d.getFromEnv("colorManager"),f=h.entitydef||[];for(n in!g.attachEvent&&u&&(d.addExtEventListener("legendUpdate",function(){if("legend"===(c=arguments[1]).component)d.legendInteractivity(c.legendItem,c.colorObj);else for(i=(p=c.maxMinArray).length,l=0;l<i;l++)d.updateEntityColors(p[l].min,p[l].max)},u),g.attachEvent=!0),t=d.JSONData=h.data&&h.data[0]&&h.data[0].data?h.data[0].data||[]:h.data||[],g.useSNameAsId=Object(s.db)(b.usesnameasid,0),this._redefineEntities(f),o=d.components.data,g.showTooltip=Object(s.db)(b.showtooltip,1),g.showHoverEffect=Object(s.db)(b.showhovereffect,0),t=V(t),d.calculateDataLimits(),h.colorrange||d.detachChild(d.getChildren("colorRange")&&d.getChildren("colorRange")[0].getId()),o)this._configureEntity(n,a=o[n],(r=t[n])?Object(s.Qa)(q._sanitizeEntityOptions(Object(s.V)({},r)),a.config):a.config)}updateEntityColors(e,t){let o,r,a,n,i,l,s=this.components.data,c=this.getFromEnv("chart"),d={"fill-opacity":0};for(n in s)a=(r=(o=s[n]).config).cleanValue,l={"fill-opacity":(i=r.alphaArr||[])[0]/100||1},a<e||a>t?(q.setCustomAttrs(o,d,c),o.hidden=!0):(o.hidden=!1,q.setCustomAttrs(o,l,c))}legendInteractivity(e,t){let o,r,a,n,i,l,s=this,c=s.getFromEnv("chart"),d=s.components.data,h=e.config,g=e.hasState("hidden"),b=s.getFromEnv("colorManager"),p={},u={"fill-opacity":0};for(o in c.getFromEnv("animationManager").setAnimationState("legendInteraction"),d)d.hasOwnProperty(o)&&(l=b.getColorObj(a=(h=(r=d[o]).config).cleanValue),p["fill-opacity"]=(n=h.visibleEntityAttr)["fill-opacity"],i=g?p:u,t.code===(!l.outOfRange&&l.code)&&(r.hidden=!g,q.setCustomAttrs(r,i,c),g?e&&e.removeLegendState("hidden"):e.setLegendState("hidden")))}static setCustomAttrs(e,t){let o,r;e&&(r=(o=e.graphics).outlines).attr(t)}calculateDataLimits(){let e,t,o,r,a=this.getFromEnv("chart"),n=this.config,i=a.jsonData.data||[],l=this.getFromEnv("number-formatter"),s=1/0,c=-1/0;for(r=0,o=i.length;r<o;r++)e=l.getCleanValue(t=i[r].value),s=S(s,e),c=_(c,e);n.max=c,n.min=s}_configureEntity(e,t,o){let r,a,n,i,l,d,h,g,b,p,u,m,v,y,O,x,w,F,A,E,S,_,I=this,T=I.getFromEnv("chart"),P=I.config,M=this.getFromEnv("number-formatter"),B=T.config.entityOpts,D=t.config,V=t.labelConfig,N=o.value,G=D.cleanValue=M.getCleanValue(N),H=D.formattedValue=G===f?f:M.dataLabels(G),W=Object(s.db)(o.showtooltip,B.showTooltip),z=this._getDefaultTooltip(t,o,I),X={formattedValue:H,sName:o.shortLabel,lName:o.label},K=B.dataLabels.style,Y=D.toolText=W?Object(s.ab)(Object(s.bb)(Object(s.Za)(Object(s.bb)(o.tooltext,B.tooltext,z),[1,2,7,38,39],X,o))):k,U=D.borderColor=Object(s.bb)(o.bordercolor,B.borderColor),J=D.borderAlpha=Object(s.bb)(o.borderalpha,B.borderAlpha),Z=D.borderThickness=Object(s.db)(o.borderthickness,B.borderThickness),q=B.hoverOnNull,$=D.useHoverColor=Object(s.db)(o.showhovereffect,o.usehovercolor,q?B.showHoverEffect:isNaN(N)?0:B.showHoverEffect),Q=D.labelAlignment,ee=I.getFromEnv("colorManager");if(t.hidden=!1,D.showLabel=Object(s.db)(o.showlabel,B.showLabels),D.labelPadding=Object(s.db)(o.labelpadding,B.labelPadding),D.fontFamily=Object(s.bb)(o.font,K.fontFamily),D.fontSize=Object(s.db)(parseInt(o.fontsize,10),parseInt(K.fontSize,10)),D.fontBold=Object(s.db)(o.fontbold,0),D.fontColor=Object(s.bb)(o.fontcolor,K.color),D.connectorColor=Object(s.bb)(o.labelconnectorcolor,B.connectorColor),D.connectorAlpha=Object(s.bb)(o.labelconnectoralpha,B.connectorAlpha),D.hoverBorderThickness=Object(s.db)(o.borderhoverthickness,o.hoverborderthickness,B.hoverBorderThickness),D.hoverBorderColor=Object(s.bb)(o.borderhovercolor,o.hoverbordercolor,B.hoverBorderColor,D.borderColor),D.hoverBorderAlpha=Object(s.bb)(o.borderhoveralpha,o.hoverborderalpha,B.hoverBorderAlpha,D.borderAlpha),D.connectorThickness=Object(s.db)(o.labelconnectorthickness,B.connectorThickness),D.origConnectorThickness=D.connectorThickness,D.borderThickness=Z,D.link=o.link,D.isVisible=!0,D.id=e,D.originalId=o.origId,null!==G&&(r=ee&&ee.getColor(G))&&!r.outOfRange&&(x=r.code,r.oriAlpha!==f&&(w=r.oriAlpha+"")),Object(s.bb)(o.color,o.alpha,o.angle,o.ratio)===f?(y=R({color:Object(s.bb)(x,B.fillColor),alpha:Object(s.bb)(w,B.fillAlpha),angle:Object(s.bb)(B.fillAngle),ratio:Object(s.bb)(B.fillRatio)}),v=R({color:Object(s.bb)(B.nullEntityColor),alpha:Object(s.bb)(B.nullEntityAlpha),angle:Object(s.bb)(B.nullEntityAngle),ratio:Object(s.bb)(B.nullEntityRatio)}),l=(b=null===G?v:y).FCcolor.color,d=b.FCcolor.alpha,h=b.FCcolor.angle,g=b.FCcolor.ratio):(l=Object(s.bb)(o.color,x,B.fillColor),d=Object(s.bb)(o.alpha,w,B.fillAlpha),h=Object(s.bb)(o.angle,B.fillAngle),g=Object(s.bb)(o.ratio,B.fillRatio),b=R({color:l,alpha:d,angle:h,ratio:g})),Y===k&&(P.showTooltip=0),D.visibleEntityAttr={stroke:Object(c.c)(U,J),fill:(D.fillColor=b).toString(),"fill-opacity":d/100},_=d.split(C),D.alphaArr=_,$&&(Object(s.bb)(o.fillhovercolor,o.fillhoveralpha,o.fillhoverangle,o.fillhoverratio,o.hoverfillcolor,o.hoverfillalpha,o.hoverfillratio,o.hoverfillangle)===f?(!B.hoverColorObject&&(B.hoverColorObject=R({color:B.hoverFillColor,alpha:B.hoverFillAlpha,angle:B.hoverFillAngle,ratio:B.hoverFillRatio})),O=B.hoverColorObject):(l=Object(s.bb)(o.fillhovercolor,o.hoverfillcolor,B.hoverFillColor),d=Object(s.bb)(o.fillhoveralpha,o.hoverfillalpha,B.hoverFillAlpha),h=Object(s.bb)(o.fillhoverangle,o.hoverfillangle,B.hoverFillAngle),g=Object(s.bb)(o.fillhoverratio,o.hoverfillratio,B.hoverFillRatio),O=R({color:l,alpha:d,angle:h,ratio:g})),D.hoverColor=O),V||(V=t.labelConfig={}),p=D.fontColor,u=D.fontFamily,m=D.fontBold,Y=D.toolText,a=D.link,Q?(n=Q[0],i=Q[1]):(n=L,i=j),V.align=n,V.vAlign=i,V.bgColor=k,V.borderColor=k,V.fontColor=p,V.fontFamily=u,V.fontBold=m,V.toolText=Y,V.link=a,"object"==typeof D.options)for(F=D.entityLabels=D.entityLabels||[],S=(E=D.labels||[]).length;S--;)F[S]||(F[S]={config:{}}),V=F[S].config,(Q=E[S].labelAlignment)?(n=Q[0],i=Q[1]):(n=L,i=j),V.align=n,V.vAlign=i,V.displayValue=I.getDisplayValue(t,E[S],D.options.isDataEnabled,!S,o),V.bgColor=k,V.borderColor=k,V.toolText=Y,V.align=n,V.vAlign=i,V.bgColor=k,V.borderColor=k,V.fontColor=p,V.fontFamily=u,V.fontBold=m,V.toolText=Y;else V.displayValue=I.getDisplayValue(t,A={shortText:D.shortLabel,text:D.label},!0,!0,o)}getDisplayValue(e,t,o,r,a){let n,i=this.getFromEnv("chart").config.entityOpts,l=e.config,c=l.cleanValue,d=l.formattedValue,h=i.labelSepChar;return o?r&&void 0!==a.displayvalue?n=a.displayvalue:(n=Object(s.bb)(i.includeNameInLabels?i.useShortName?t.shortText:t.text:""),i.includeValueInLabels&&null!==c&&(n=n===f?d:n+h+d)):n=l.label,n}static _sanitizeEntityOptions(e){return delete e.outlines,delete e.label,delete e.shortlabel,delete e.labelposition,delete e.labelalignment,delete e.labelconnectors,e}_redefineEntities(e){let t,o,r,a,n,i,l,c,d,h,g,b,p=this,u=p.config,f={},m={},v=p.getFromEnv("chart").config.entities,y=u.useSNameAsId,C=0;for(t=e.length;t--;)if(r=(o=e[t]).internalid,a=o.newid?o.newid:r,n=o.sname,i=o.lname,b=v[r],r=Object(s.rb)(r),a=(a=Object(s.rb)(a))&&a.toLowerCase(),b){for(g in f[a]=c={origId:r},m[r]=!0,b)c[g]=b[g];c.shortLabel=n||b.shortLabel,c.label=i||b.label,c.showhovereffect=o.showhovereffect,c.fillhovercolor=o.fillhovercolor,c.fillhoveralpha=o.fillhoveralpha,c.fillhoverangle=o.fillhoverangle,c.fillhoverratio=o.fillhoverratio,c.borderhoverthickness=o.borderhoverthickness}for(l in(h=p.components.data)||(h=p.components.data={}),f)h[l=l.toLowerCase()]||(h[l]={config:{}}),h[l].config=f[l],C+=1;for(l in d=h,v)if(c=v[l],!m[l=Object(s.rb)(l)]){for(g in y?(!(b=d[c.shortLabel.toLowerCase()])&&(b=d[c.shortLabel.toLowerCase()]={}),b.config={},b.origId=c.shortLabel):(!(b=d[l.toLowerCase()])&&(b=d[l.toLowerCase()]={}),b.config={},b.config.origId=l),c)b.config[g]=c[g];C+=1}u.entityCount=C}draw(){let e,t=this.config,o=this.getFromEnv("chart"),r=s.Ma?200:10;this.config.ready=!1,t.BATCH_SIZE=r,t.labelBatchSize=s.Ma?200:20,(e=this._batchRender())(0),o.config.entityFlag=!0,o.checkComplete()}_batchRender(){let e,t,o,r,a,n=this,i=n.config,l=n.getFromEnv("chart").config.entities.firstEntity,s=n.components.data,c=i.BATCH_SIZE,d=i.entityKeys=l?n._getKeys(l,s):Object.keys(s),h=i.entityLength=d.length,g=function(i){for(e=i,o=0;d[e]!==f;)if(a=n.drawEntity(t=s[d[e]],c),o+=a,t.config.drawn&&((r=e===h-1?t:s[d[e-1]])&&(r.config.drawn=!1,r.config.outlineStartIndex=f),e++),o>=c){n.addJob("entityDraw",g.bind(this,e),u.b.entitydraw);break}e===h&&(n._addEventListenersToEntities(0),n.initComplete())};return g}_addEventListenersToEntities(e){let t,o,r,a,n=this,i=n.components.data,l=n.config,s=l.BATCH_SIZE,c=l.entityKeys,d=l.entityLength,h=0;for(t=e;t<d;t++)if((r=(a=(o=i[c[t]]).config).options)&&!1===r.isDataEnabled||n.addMouseGestures(o),++h===s){n.addJob("_addEventListenersToEntities",n._addEventListenersToEntities.bind(this,t),u.b.entitydraw);break}}static _getKeys(e,t){let o=[e],r=e;for(;t[r];)o.push(r=t[r].nextId);return o}_getDefaultTooltip(e,t){let o,r,a=e.config.cleanValue,n=e.config.formattedValue,i=this.getFromEnv("chart").config.entityOpts;if("object"==typeof e.config.options){if(!(r=t.labels&&t.labels[0]))return f;o=(i.useSNameInTooltip?r.shortText:r.text)+(null===a?k:i.tooltipSepChar+n)}else o=(i.useSNameInTooltip?t.shortLabel:t.label)+(null===a?k:i.tooltipSepChar+n);return o}drawEntity(e,t){let o,r,a,n,i,l,c,d,h,g=this,b=g.getFromEnv("chart"),p=b.getFromEnv("animationManager"),u=e.config,m=s.Ma||!y?"litepath":"path",v=b.config.entityOpts,C=u.outlines,k=g.getFromEnv("toolTipController"),O=this.getLinkedParent().getChildContainer("plot"),x=this.getLinkedParent().getChildContainer("plotShadow"),w=u.toolText,F=v.shadow,j=[],L={};if(g._configureEntityDrawingParams(e),a=(u=e.config).visibleEntityAttr,h=u.shadowOptions,o=u.outlineStartIndex===f?C.length:u.outlineStartIndex,e.graphics||(e.graphics={}),c=0,j=u.outlinePath||(u.outlinePath=[]),d=u.customStrokeWidthModifier,"object"==typeof u.options){for(;o--;)if(j=C[o].outline,n=!0===u.options.isDataEnabled?a:Object(s.V)(Object(s.V)({},a),M(C[o].style,d)),(i=e.graphics.outlines)||(i=e.graphics.outlines=[]),i[o]||(i[o]={}),l=i[o].outline,n[m]=j,(l=i[o].outline=p.setAnimation({el:m,container:O,attr:n,component:g,label:"path"})).shadow(!!F&&h,x),k.enableToolTip(l,w),c++,u.outlineStartIndex=o,c===t)return c;return u.drawn=!0,c}for(;o--;)if(j=(r=C[o]).concat(j),c++,u.outlineStartIndex=o,c===t)return u.outlinePath=j,c;return e.graphics.outlines||(a[m]=j),Object.assign(L,a,e.hidden&&{"fill-opacity":0}||{}),e.graphics.outlines=p.setAnimation({el:e.graphics.outlines||m,container:O,attr:L,component:g,label:"path"}),u.drawn=!0,u.outlineStartIndex=0,u.outlinePath=[],e.graphics.outlines.shadow(!!F&&h,x),k.enableToolTip(e.graphics.outlines,w),c}_configureEntityDrawingParams(e){let t,o=this.getFromEnv("chart"),r=e.config,a=o.config.scalingParams,n=!y||s.Ma,i=a.scaleFactor,l=a.strokeWidth,c=(n?o.baseScaleFactor:1)*l,d=1===o.config.entityOpts.scaleBorder,h=r.borderThickness,g=r.origConnectorThickness,b=r.hoverBorderThickness,p=r.visibleEntityAttr,u=p["fill-opacity"];r.shadowOptions={scalefactor:[i,i*o.config.baseScaleFactor],opacity:_.apply(E,r.alphaArr)/100,useFilter:0},r.fillOpacity=e.hidden?0:u,n?(h=r.entityBorderThickness=d?h*c:h/i,g/=i,t=d?i:a.sFactor,b&&(b=r.hoverBorderThickness=d?b*c:b/i)):(h=d?h*l:h,t=d?a.scaleFactor:o.baseScaleFactor),r.entityBorderThickness=h,r.connectorThickness=g,r.customStrokeWidthModifier=t,p["stroke-width"]=h,p.transform=s.Ma||!y?"":a.transformStr}drawLabels(e){let t,o,r,a,n=this,i=e,l=n.getFromEnv("chart"),s=n.config,c=s.labelBatchSize,h=s.entityLength,g=[],b=0,p=l.getChildren("mapLabelAnnotations")&&l.getChildren("mapLabelAnnotations")[b],u=0,f=0,m=l.getFromEnv("toolTipController"),v=l.config.annotationConfig;for(t in p||(a=new d.a,l.attachChild(a,"mapLabelAnnotations"),p=l.getChildren("mapLabelAnnotations")[b]),p.clear(),p._renderer&&(p._renderer=null),v.showbelow=0,i){if(n.drawLabel(i[t],g),++u===c){for(p.annotation.injectDependency("paper",l.getFromEnv("paper")),p.annotation.injectDependency("toolTipController",m),o=0;o<g.length;o++)g[o].animationLabel="entityLabel";for(r=p.addGroup(Object.assign(v,{id:"entityLabels"+b,items:g,animationLabel:"entityLabelGroup"}),n),l.config.labelsOnTop&&r.store.element.toFront(),o=0;o<r.items.length;o++)r.items[o].addEventListener("mouseover",g[o].onmouseover),r.items[o].addEventListener("mouseout",g[o].onmouseout),r.items[o].addEventListener("click",g[o].onclick);b++,(p=l.getChildren("mapLabelAnnotations")&&l.getChildren("mapLabelAnnotations")[b])||(a=new d.a,l.attachChild(a,"mapLabelAnnotations"),p=l.getChildren("mapLabelAnnotations")[b]),p.clear(),p._renderer&&(p._renderer=null),u=0,g=[]}else if(f==h-1){for(p.annotation.injectDependency("paper",l.getFromEnv("paper")),p.annotation.injectDependency("toolTipController",m),o=0;o<g.length;o++)g[o].animationLabel="entityLabel";for(r=p.addGroup(Object.assign(v,{id:"entityLabels"+b,items:g,animationLabel:"entityLabelGroup"}),n),l.config.labelsOnTop&&r.store.element.toFront(),o=0;o<r.items.length;o++)r.items[o].addEventListener("mouseover",g[o].onmouseover),r.items[o].addEventListener("mouseout",g[o].onmouseout),r.items[o].addEventListener("click",g[o].onclick)}f++}n.drawLabelConnFn(0)}drawLabelConnFn(e){let t,o,r,a,n,i=this,l=i.config,s=i.components.data,c=l.BATCH_SIZE,d=l.entityKeys,h=d.length,g=0;for(o=e;o<h;o++){if("object"==typeof(a=(n=s[d[o]]).config).options)for(t=(r=a.labels)&&r.length||0;t--;)r[t].labelConnectors&&(i.drawLabelConnectors(n,r[t].labelConnectors,i),g++);else a.labelConnectors&&(i.drawLabelConnectors(n,a.labelConnectors,i),g++);if(g===c){i.addJob("drawLabelConnectors",i.drawLabelConnFn.bind(this,o),u.b.entitydraw);break}}}_getLabelObject(e,t,o){let r,a,n,i,l,s,c,d,h,g,b,p,u=this,m=u.getFromEnv("chart"),v=e.config,y=m.config.scalingParams,C=e.graphics&&e.graphics.outlines,k=v.fontSize,A=v.labelPadding;return t===f?(r=e.labelConfig,a=v.labelPosition,n=v.labelAlignment):(i=(r=(p=(v.entityLabels||[])[t]).config).style=(b=(v.labels||[])[t]).style,a=b.labelPosition,n=b.labelAlignment),a?(l=a[0],s=a[1]):(l=(c=C.getBBox()).x+c.width/2,s=c.y+c.height/2),n?(h=n[1],(d=n[0])===w?l-=A:d===F&&(l+=A),h===O?s-=A:h===x&&(s+=A)):(d=L,h=j),g=parseFloat(k)/y.sFactor,!o&&i&&(i.color&&(r.fontColor=i.color),i["font-size"]&&(g=parseFloat(i["font-size"])/y.sFactor),i["font-family"]&&(r.fontFamily=i["font-family"]),i["font-weight"]!==f&&(r.fontBold="bold"===i["font-weight"])),r.x=l.toString(),r.y=s.toString(),r.wrap=1,r.type="text",r.fontSize=g,{x:l.toString(),y:s.toString(),wrapwidth:B[d](void 0,l+void 0)-A,wrapheight:D[h](void 0,s+void 0)-A,wrap:1,type:"text",align:r.align,valign:r.vAlign,text:r.displayValue,tooltext:r.toolText,css:r.link!==f&&{cursor:"pointer",_cursor:"hand"},bgcolor:r.bgColor,bordercolor:r.borderColor,fillcolor:r.fontColor,fontsize:r.fontSize,font:r.fontFamily,bold:r.fontBold,onclick:function(t){let o,r,a=e.graphics.outlines;if(a instanceof Array)for(o=0,r=a.length;o<r;o++)u.entityClick(a[o].outline,t);else u.entityClick(a,t)},onmouseover:function(t){let o,r,a=e.graphics.outlines;if(a instanceof Array)for(o=0,r=a.length;o<r;o++)u.entityRollOver(a[o].outline,t);else u.entityRollOver(a,t)},onmouseout:function(t){let o,r,a=e.graphics.outlines;if(a instanceof Array)for(o=0,r=a.length;o<r;o++)u.entityRollOut(a[o].outline,t);else u.entityRollOut(a,t)},ontouchstart:function(t){let o,r,a=e.graphics.outlines;if(a instanceof Array)for(o=0,r=a.length;o<r;o++)u.entityRollOver(a[o].outline,t);else u.entityRollOver(a,t);u.entityRollOver(a,t)}}}drawLabel(e,t){let o,r,a,n=this,i=e.config;if(i.showLabel)if("object"==typeof i.options)for(r=(a=i.labels)&&a.length||0,o=i.options.isDataEnabled;r--;)t.push(n._getLabelObject(e,r,o,!r));else t.push(n._getLabelObject(e,f,!0,!0))}drawLabelConnectors(e,t,o){let r,a,n=e.config,i=this,l=i.getFromEnv("chart"),d=l.getFromEnv("animationManager"),h=l.config.scalingParams,g=o.getLinkedParent().getChildContainer("plot"),b=t&&t.length||0,p=n.showLabel;for(;b--;)r=e.graphics.connectorElem,p?e.graphics.connectorElem=r=d.setAnimation({el:e.graphics.connectorElem||"path",attr:{path:a=t[b],opacity:1,transform:s.Ma||!y?"":h.transformStr,stroke:Object(c.c)(n.connectorColor,n.connectorAlpha),"shape-rendering":A,"stroke-width":n.connectorThickness},container:g,component:i,label:"labelConnectors"}):r&&r.hide()}entityClick(e,t){let o=e.node.__entity,r=this.getFromEnv("chart"),a=r.config.scalingParams,n=o.graphics.outlines.getBBox(),i=r.getFromEnv("linkClickFN"),l=o.config,s=l.link;n.width*=a.scaleFactor,n.height*=a.scaleFactor,n.x=n.x*a.scaleFactor+a.translateX,n.y=n.y*a.scaleFactor+a.translateY,n.x2=n.x+n.width,n.y2=n.y+n.height,r.fireChartInstanceEvent("entityclick",l.eventArgs,t),s!==f&&i.call({link:s,entity:o,entityBox:n},!0)}entityRollOver(e,t){let o=e.node.__entity,r=o.config,a=this.getFromEnv("chart"),n=a.getFromEnv("animationManager"),i=r.hoverAttr;a.plotEventHandler(e,t,"entityRollOver"),e.data("hovered")?clearTimeout(o.config.timer):r.useHoverColor&&r.isVisible&&!o.hidden&&i&&(a.config.hoverEntity=e,n.setAnimation({el:e,attr:i,component:this,state:"updating",label:"path"}),e.data("hovered",!0))}entityRollOut(e,t){let o,r=e.node.__entity,a=this,n=a.getFromEnv("chart"),i=n.getFromEnv("animationManager"),l=r.config.revertAttr;n.plotEventHandler(e,t,"entityRollOut"),r.config.timer=setTimeout(function(){!0!==(o=r.hidden)&&l&&(i.setAnimation({el:e,attr:l,component:a,state:"updating",label:"path"}),e.data("hovered",!1))},100)}addMouseGestures(e){let t,o,r,a,n,i=e.config,l=i.originalId,d=this,h=e.graphics,g=i.useHoverColor,b=i.hoverBorderThickness,p=i.hoverBorderColor,u=i.hoverBorderAlpha,m=i.entityBorderThickness,v=i.borderColor,y=i.borderAlpha,C=i.link,k=i.visibleEntityAttr,O=function(t){C!==f&&t.css({cursor:"pointer",_cursor:"hand"}),t.data("eventArgs",i.eventArgs),t.data("groupId","groupId"+l),t.node.__entity=e,e._listenersBinded||t.click(d.entityClick.bind(d,t)).hover(d.entityRollOver.bind(d,t),d.entityRollOut.bind(d,t))};for(t in i.eventArgs={value:i.cleanValue,label:i.label,shortLabel:i.shortLabel,originalId:i.origId,id:i.id||i.origId},i.legacyEventArgs={value:i.value,lName:i.label,sName:i.shortLabel,id:i.originalId||i.id},g&&(i.hoverAttr={fill:Object(s.pb)(i.hoverColor)},i.revertAttr={fill:Object(s.pb)(i.fillColor),stroke:Object(s.pb)(i.borderColor,i.borderAlpha)},i.revertAttr["fill-opacity"]=k["fill-opacity"],b!==m&&(i.hoverAttr["stroke-width"]=Object(s.db)(b,m),i.revertAttr["stroke-width"]=m),(p!==v||u!==y)&&(i.hoverAttr.stroke=Object(c.c)(p,u),i.revertAttr.stroke=Object(c.c)(v,y))),h)if(h.hasOwnProperty(t))if(h[t]instanceof Array){for(o=0,a=(n=h[t]).length;o<a;o++)O(r=n[o].outline);e._listenersBinded=!0}else O(r=h[t]),e._listenersBinded=!0}getDataLimits(){let e=this.config;return{max:e.max,min:e.min}}initComplete(){let e=this.getFromEnv("chart");this.drawLabels(this.components.data),e.config.entitiesReady=!0,e.checkComplete()}}var $,Q=q,ee=function(e,t,o,r,a){var n=Math.pow;return n(o-e,2)+n(r-t,2)<=n(a,2)},te=Math.PI,oe=Math.cos,re=Math.sin,ae=Math.max,ne=Math.min,ie=te/180,le=function(e,t,o,r,a,n){var i,l,s;return i=(r-t)*(a-o),l=(o-e)*(n-r),isNaN(i)&&(i=0),isNaN(l)&&(l=0),0==(s=i-l)?0:0<s?1:2},se=function(e,t,o,r,a,n){return!!(o<=ae(e,a)&&o>=ne(e,a)&&r<=ae(t,n)&&r>=ne(t,n))},ce=function(e,t,o,r,a,n,i,l){var s=le(e,t,o,r,a,n),c=le(e,t,o,r,i,l),d=le(a,n,i,l,e,t),h=le(a,n,i,l,o,r);return!!(s!==c&&d!==h||0===s&&se(e,t,a,n,o,r)||0===c&&se(e,t,i,l,o,r)||0===d&&se(a,n,e,t,i,l)||0===h&&se(a,n,o,r,i,l))},de=function(e,t,o,r,a,n,i){var l,s,c,d,h,g,b,p=0,u=!1;if(ee(e,t,o,r,a)&&3<=n){for(b=2*te/n,c=o+a*oe(-(s=i===$?.5*te:i%360*ie)),g=r+a*re(-s),l=0;l<n;l++){if(d=o+a*oe(-(s+=b)),h=r+a*re(-s),ce(c,g,d,h,e,t,1/0,t)){if(0===le(c,g,e,t,d,h))return se(c,g,e,t,d,h);p++}c=d,g=h}u=0!=p%2}return u},he=(e,t)=>!e||e&&t&&t.i>e.i?t:e;class ge{constructor(e){this.configure(e)}configure(e){var t=this;t.validatorFn=e?t.shapeValidator():t.defaultValidator()}defaultValidator(){var e=Math.pow,t=this;return function(o){var r=t.mousePoint;return!!(o&&1>=e((o.x-r.x)/t.xLimit,2)+e((o.y-r.y)/t.yLimit,2))}}shapeValidator(){var e=this;return function(t){var o,r,a,n,i=e.mousePoint,l=t&&t.shapeInfo,s=!1,c=i.x,d=i.y;return"circle"===(o=l&&l.type)?s=ee(c,d,t.x,t.y,r=l.radius):"arc"===o?(r=l.radius,s=!ee(c,d,t.x,t.y,l.innerradius)&&ee(c,d,t.x,t.y,r)):"polygon"===o?s=de(c,d,t.x,t.y,r=l.radius,l.sides,l.startAngle):"rect"===o||"rectangle"===o?(n=t.y,s=c>=(a=t.x)&&c<=a+(l.width||0)&&d>=n&&d<=n+(l.height||0)):"default"===o&&(s=!1),s}}buildKdTree(e){return this.kdTree=function(e){function t(e,t,o){var r=e[t];e[t]=e[o],e[o]=r}var o,r,a,n=e&&e[0]&&e[0].r||5,i=Math.max,l=Math.floor,s=Math.sqrt,c=Math.min,d=Math.log,h=Math.exp,g=Math.pow;for(r=function(e,o,a,n){for(var g,b,p,u,f,m,v,y,C,k;n>a;){for(600<n-a&&(b=o-a+1,p=d(g=n-a+1),u=.5*h(2*p/3),f=.5*s(p*u*(g-u)/g)*(0>b-g/2?-1:1),m=i(a,l(o-b*u/g+f)),v=c(n,l(o+(g-b)*u/g+f)),r(e,o,m,v)),y=e[o],C=a,k=n,t(e,a,o),e[n].x>y.x&&t(e,a,n);C<k;){for(t(e,C,k),C++,k--;e[C].x<y.x;)C++;for(;e[k].x>y.x;)k--}e[a].x===y.x?t(e,a,k):t(e,++k,n),k<=o&&(a=k+1),o<=k&&(n=k-1)}},a=function(e,o,r,n){for(var g,b,p,u,f,m,v,y,C,k;n>r;){for(600<n-r&&(b=o-r+1,p=d(g=n-r+1),u=.5*h(2*p/3),f=.5*s(p*u*(g-u)/g)*(0>b-g/2?-1:1),m=i(r,l(o-b*u/g+f)),v=c(n,l(o+(g-b)*u/g+f)),a(e,o,m,v)),y=e[o],C=r,k=n,t(e,r,o),e[n].y>y.y&&t(e,r,n);C<k;){for(t(e,C,k),C++,k--;e[C].y<y.y;)C++;for(;e[k].y>y.y;)k--}e[r].y===y.y?t(e,r,k):t(e,++k,n),k<=o&&(r=k+1),o<=k&&(n=k-1)}},o=(e=e||[]).length;o--;)e[o].r>n&&(n=e[o].r),e[o].i=o,e[o].x=+e[o].x,e[o].y=+e[o].y;return{tree:0===e.length?{}:function e(t,o,n,i){var l,s={},c=i?"y":"x";return o===n?(s.point=t[o],s):1==n-o?(t[o][c]>t[n][c]?(s.point=t[o],s.left={point:t[n]}):(s.point=t[n],s.left={point:t[o]}),s):(l=o+n>>1,i?a(t,l,o,n):r(t,l,o,n),s.point=t[l],s.left=e(t,o,l-1,!i),s.right=e(t,l+1,n,!i),s)}(e,0,e.length-1,!1),search:function(e,t,o,r){function a(e,t,o,r){return s(g(e-o,2)+g(t-r,2))}function i(r,n){return"circle"===o?a(r,n,e,t)<=u:r>=u&&r<=f&&n>=m&&n<=v}function l(e,t,o){return e>=t&&e<=o}function c(o){var r=l(e,o.x1,o.x2)&&l(t,o.y1,o.y2),n=a(e,t,o.point.x,o.point.y);return h?void(r?y?o.point.i>h.point.i&&(h=o,y=r,C=n):(h=o,y=r,C=n):!y&&n<C&&(h=o,y=r,C=n)):(h=o,y=r,void(C=n))}function d(r,a){"circle"===o?u=r:(u=e-r||0,f=e+r||0,m=t-a||0,v=t+a||0)}var h,b,p,u=e-n,f=e+n,m=t-n,v=t+n,y=!1,C=0;return r=r||{},p=function(e){e&&e.point&&(d(r.rx||e.point.r,r.ry||e.point.r),i(e.point.x,e.point.y)&&c(e),m<=e.point.y&&b(e.left),v>=e.point.y&&b(e.right))},(b=function(e){e&&e.point&&(d(r.rx||e.point.r,r.ry||e.point.r),i(e.point.x,e.point.y)&&c(e),u<=e.point.x&&p(e.left),f>=e.point.x&&p(e.right))})(this.tree),h&&h.point||h}}}(e),this.tree=this.kdTree.tree,this}getNeighbour(e,t,o){var r=this,a=r.tree,n={x1:e.x-r.xLimit,x2:e.x+r.xLimit,y1:e.y-r.yLimit,y2:e.y+r.yLimit},i=r.validatorFn;return r.mousePoint=e,t?this.kdTree&&this.kdTree.search(e.x,e.y,o,e.options):a?r._searchBtwnLimit(n,a,!0,i):void 0}_searchBtwnLimit(e,t,o,r){var a,n,i=o?e.x1:e.y1,l=o?e.x2:e.y2;if((a=t&&t.point&&t.point[o?"x":"y"])!==$)return r(t.point)&&(n=t.point),a>=i&&t.left&&(n=he(n,this._searchBtwnLimit(e,t.left,!o,r))),a<=l&&t.right&&(n=he(n,this._searchBtwnLimit(e,t.right,!o,r))),n}_setSearchLimit(e,t){this.xLimit=e,this.yLimit=t}}ge.prototype.constructor=ge;var be=ge;let pe,ue=window.navigator.userAgent,fe=/msie/i.test(ue)&&!window.opera,me="",ve="top",ye="bottom",Ce="right",ke="left",Oe="middle",xe="center",we=.6,Fe=window.Math,je=Fe.min,Le=Fe.max,Ae="items",Ee=Math.PI/180,Se="rgba(192,192,192,"+(fe?.002:1e-6)+")",_e=function(e,t){let o=t?Object(s.V)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=s.pb,o},Ie=function(e,t){let o,r=e&&e.length||!1,a=t||"id",n={};if(!e)return e;for(;r--;)(o=e[r])[a]!==pe&&(n[o[a].toLowerCase()]=o);return n};Object(g.a)({name:"mapsAnimation",type:"animationRule",extension:p});class Te extends Q{constructor(){super(),this.components={},this.getLabelAlignment={top:function(e,t,o){return{x:e.toString(),y:(t-o).toString(),align:xe,valign:ve}},left:function(e,t,o){return{x:(e-o).toString(),y:t.toString(),align:Ce,valign:Oe}},right:function(e,t,o){return{x:(e+o).toString(),y:t.toString(),align:ke,valign:Oe}},bottom:function(e,t,o){return{x:e.toString(),y:(t+o).toString(),align:xe,valign:ye}},center:function(e,t){return{x:e.toString(),y:t.toString(),align:xe,valign:Oe}}},this.getWrapWidth={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*je(t,e-t)}},this.getWrapHeight={top:function(){return arguments[1]},middle:function(e,t){return 2*je(t,e-t)},bottom:function(e,t){return e-t}}}getName(){return"markers"}getType(){return"dataset"}configureAttributes(e){if(e){this.JSONData=e;let t=this,o=t.getFromEnv("chart").config.markerOpts;t.calculateDataLimits(),o.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()}}calculateMarkerRadiusLimits(){if(this.JSONData){let e=this,t=e.JSONData,o=e.config,r=e.getFromEnv("chart"),a=Te.getMarkerRadiusLimits(r.config.width,r.config.height,t.markermaxradius,t.markerminradius);o.minRadius=a.min,o.maxRadius=a.max}}calculateDataLimits(){let e,t,o,r,a,n=this.getFromEnv("chart"),i=this.config,l=(n.jsonData.markers||{})[Ae]||[],s=this.getFromEnv("number-formatter"),c=1/0,d=-1/0;for(a=0,o=l.length;a<o;a++)null!==(t=s.getCleanValue(r=(e=l[a]).value))&&(c=je(t,c),d=Le(t,d));i.min=c,i.max=d}_parseMarkers(){let e,t,o,r,a,n,i,l,c=this,d=c.getFromEnv("chart"),h=d.jsonData.markers,g=h[Ae],b=h.shapes,p=d.config.markerOpts,u=this.getFromEnv("number-formatter"),f=c.components.shapeObjs={},m=c.components.markerObjs={};if(g&&g.length){if(b&&b.length)for(t=b.length;t;t-=1)(l=(r=b[t-1]).id.toLowerCase())&&(f[l]=r);for(t=g.length;t--;)(l=(r=g[t]).id&&r.id.toLowerCase())&&((e=r.value)!==pe&&""!==e&&(e=parseFloat(e)),(a=(o=Te._initializeMarkerItem(l,r,null,d)).config.options.shapeid)&&"string"==typeof a&&(a=a.toLowerCase()),i=(n=o.config).options,n.cleanValue=u.getCleanValue(e),n.formattedValue=null===n.cleanValue?pe:u.dataLabels(e),n.fillColor=Object(s.bb)(i.fillcolor,i.color,p.fillColor),n.fillAlpha=Object(s.bb)(i.fillalpha,i.alpha,p.fillAlpha),n.fillRatio=Object(s.bb)(i.fillratio,p.fillRatio),n.fillAngle=Object(s.bb)(i.fillangle,p.fillAngle),n.borderThickness=Object(s.db)(i.borderthickness,p.borderThickness),n.borderColor=Object(s.bb)(i.bordercolor,p.borderColor),n.borderAlpha=Object(s.bb)(i.borderalpha,p.borderAlpha),n.labelPadding=i.labelpadding||p.labelPadding,o.dataset=c,r.__hideMarker&&(o._isHidden=!0),a&&(o.shapeObj=f[a]),m[l]=o)}}defineMarkersNShapes(){let e,t,o,r,a,n,i,l,c=this,d=c.getFromEnv("chart"),h=d.jsonData.markers,g=h.definition,b=this.getFromEnv("number-formatter"),p=d.config.markerOpts,u=Ie(g)||{},f=Ie(h.application)||{},m=h.shapes,v=c.components.shapeObjs=c.components.shapeObjs||(c.components.shapeObjs={}),y=c.components.markerObjs=c.components.markerObjs||(c.components.markerObjs={});if(g&&g.length){if(m&&m.length)for(r=m.length;r;r-=1)(l=(n=m[r-1]).id.toLowerCase())&&(v[l]=n);for(l in u)(a=y[l]=Te._initializeMarkerItem(l,n=u[l],f[l],d)).dataset=c,i=a.config.options.shapeid,(t=a.config).cleanValue=b.getCleanValue(o=n.value),e=t.options,t.formattedValue=null===t.cleanValue?pe:b.dataLabels(o),t.fillColor=Object(s.bb)(e.fillcolor,e.color,p.fillColor),t.fillAlpha=Object(s.bb)(e.fillalpha,e.alpha,p.fillAlpha),t.fillRatio=Object(s.bb)(e.fillratio,p.fillRatio),t.fillAngle=Object(s.bb)(e.fillangle,p.fillAngle),t.borderThickness=Object(s.db)(e.borderthickness,p.borderThickness),t.borderColor=Object(s.bb)(e.bordercolor,p.borderColor),t.borderAlpha=Object(s.bb)(e.borderalpha,p.borderAlpha),t.labelPadding=e.labelpadding||p.labelPadding,t.options.tooltext=Object(s.bb)(e.tooltext,p.tooltext),t.link=e.link,i&&(a.shapeObj=v[i.toLowerCase()])}}static getMarkerRadiusLimits(e,t,o,r){let a=je(e,t);return r=parseFloat(r),o=parseFloat(o),isNaN(r)||isNaN(o)?isNaN(r)?isNaN(o)?{min:.02*a,max:.07*a}:{min:parseInt(o/10,10),max:o}:{min:r,max:10*r}:r<o?{min:r,max:o}:{min:o,max:r}}getDataLimits(){let e=this.config;return{min:e.min,max:e.max}}static _initializeMarkerItem(e,t,o){let r,a={},n=a.config;return n||(n=a.config={}),n.id=e,n.definition=t,n.application=o,n.hasValue=null,n.value=null,n.options=null,n.label=null,n.markerShape=null,n.markerLabel=null,n.drawOptions={shape:null,label:null},n.drawComplete=!1,r=a.config.options=Object(s.V)({},n.definition),n.dataEnabled?!isNaN(r.value)&&""!==r.value&&(a.value=parseFloat(r.value),a.hasValue=!0):n.applyAll?n.options=Object(s.V)(r,n.application):o&&(n.options=Object(s.V)(r,n.application)),a}configureConnectors(){let e,t,o,r,a,n,i,l,c,d,h,g,b,p,u=this,f=u.getFromEnv("chart"),m=f.jsonData.markers||{},v=m.connector||m.connectors||[],y=u.components.markerObjs,C=v.length,k=u.components.connectors,O=function(e){return function(t){let o=this,r=o.getElement();r&&o.unfilteredConfig.hoverEffect&&r.attr(o.unfilteredConfig._hoverAttrs),f.fireChartInstanceEvent("connectorrollover",e,t)}},x=function(e){return function(t){let o=this,r=o.getElement();r&&o.unfilteredConfig.hoverEffect&&r.attr(o.unfilteredConfig._defaultAttrs),f.fireChartInstanceEvent("connectorrollout",e,t)}},w=function(e){return function(t){f.fireChartInstanceEvent("connectorClick",e,t)}},F=f.config.connectorOpts,j={};for(k=u.components.connectors=[],p=0;p<C;p++)((b=v[p]).from||b.to)&&(t=y[b.from.toLowerCase()],o=y[b.to.toLowerCase()],t&&o)&&(r=v[p].label,(j=k[p])||(j=k[p]={}),j.config||(e=j.config={}),j.graphics||(j.graphics={}),(e=j.config=Object(s.V)({},b)).fromMarker=t,e.toMarker=o,e.link=b.link,e.showTooltip=Object(s.db)(b.showtooltip,F.showTooltip),a=e.tooltext=e.showTooltip?Object(s.bb)(b.tooltext,F.tooltext):me,n=e.thickness=Object(s.bb)(b.thickness,F.thickness),i=e.color=Object(s.bb)(b.color,F.color),l=e.alpha=Object(s.bb)(b.alpha,F.alpha),e.hoverEffect=Object(s.db)(b.showhovereffect,F.showHoverEffect),c=Object(s.bb)(b.hovercolor,F.hoverColor,i),d=Object(s.bb)(b.hoveralpha,F.hoverAlpha,l),h=Object(s.bb)(b.hoverthickness,F.hoverThickness,n),e.dashed=Object(s.bb)(b.dashed,F.dashed),e.dashLen=Object(s.db)(b.dashlen,F.dashlen),e.dashGap=Object(s.db)(b.dashgap,F.dashgap),a&&(e.tooltext=a=Object(s.ab)(Object(s.Za)(a,[3,40,41,42,43],{label:r,fromId:t.config.definition.id,toId:o.config.definition.id,fromLabel:t.config.definition.label,toLabel:o.config.definition.label},void 0))),e.eventArgs={fromMarkerId:t.config.id,toMarkerId:o.config.id,label:r},e._hoverAttrs={stroke:_e({color:c,alpha:d}).toString(),"stroke-width":h},e._defaultAttrs={stroke:_e({color:i,alpha:l}).toString(),"stroke-width":n},e.type="line",e.onclick=w(e.eventArgs),e.onmouseover=O(e.eventArgs),e.onmouseout=x(e.eventArgs),r&&(!(g=j.labelConfig)&&(g=j.labelConfig={}),g.type="text",g.text=r,g.align=xe,g.valign=Oe,g.font=F.font,g.fillcolor=F.fontColor,g.bgcolor=F.labelBgColor,g.bordercolor=F.labelBorderColor,g.tooltext=e.tooltext))}draw(){let e,t,o,r,a,n,i,l=this,s=l.getFromEnv("chart"),c=l.config,d=s.getChildren("mapAnnotations")[0],h=l.components.markerObjs,g=s.config,b=g.markerOpts,p=g.scalingParams,f=s.config.annotationConfig,m=l.getFromEnv("toolTipController"),v=[],y=[],C={};for(r in this._drawConnectors(),l.imageLoadCount=0,l.imageCount=0,i=d.addGroup(Object.assign(f,{id:"markers",fillalpha:"100",items:v,scaleimages:1}),l),n=d.addGroup(Object.assign(f,{id:"markerLabels",items:y,scaleimages:1}),l),g.labelsOnTop&&s.getChildren("mapLabelAnnotations")&&s.getChildren("mapLabelAnnotations")[0].annotation.groups[0].store.element.toFront(),l.components.markerGroup=i,l.components.markerLabelGroup=n,c.autoScale=b.autoScale?p.sFactor:1,h)e=null,(o=(t=h[r]).config).conIsHidden||(e=this._drawMarkerItem.call(t)),e&&(o._annotationIndex=v.length,C[r]=t,t.markerShape=e.markerShape&&d.addItem(i.getId(),Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},e.markerShape),!0,l),(a=t.markerShape&&t.markerShape.getElement())&&m.enableToolTip(a,t.config.tooltext),v.push(t.markerShape),t.markerLabel=e.markerLabel&&d.addItem(n.getId(),Object.assign({animationLabel:"markerItem"},e.markerLabel),!0,l),y.push(t.markerLabel));l.addJob("buildKdtree",l._buildKdTree.bind(l),u.b.kdTree)}_buildKdTree(){let e,t,o=this,r=o.components.kdArrayMap,a=o.components.markerGroup,n=[],i=a&&a.items,l=i&&i.length||0;for(t=0;t<l;t++)r[e=i[t].config.id]&&n.push(r[e]);o.components.kDTree||(o.components.kDTree=new be(!0)),o.components.kDTree._setSearchLimit(1/0,1/0),o.components.kDTree.buildKdTree(n)}_drawMarkerItem(){let e,t,o,r,a,n,i,l,d,h,g,b,p,u,f,m,v,y,C,k,O=this,x=O.dataset,w=x.getFromEnv("chart"),F=w.config,j=x.config,L=F.scalingParams,A=O.config,E=A.options,S=A.definition,_=F.markerOpts,I=_.dataLabels.style,T=E.shapeid,P=E.scale||1,R=E.label||me,M=w.config.scalingParams.scaleFactor*w.config.baseScaleFactor,B=(E.labelpos||ve).toLowerCase(),D=A.formattedValue===pe?pe:A.formattedValue,V=E.tooltext||_.tooltext,N=Object(s.db)(S.radius,A.radius,_.radius)*P*j.autoScale||1e-4,G=A.fillColor,H=A.fillAlpha,W=A.fillRatio,z=A.fillAngle,X=A.borderThickness,K=A.borderColor,Y=A.borderAlpha,U=x.components.kdArrayMap||(x.components.kdArrayMap={}),J=O.config.id;if(A.autoScale=_.autoScale?M:1,T)return V=V?Object(s.ab)(Object(s.Za)(V,[1,2,3],{formattedValue:D,label:R},E)):D?R+_.tooltipSepChar+D:R,D!==pe&&null!==D?R=R+_.labelSepChar+D:isNaN(P)?P=1:0>P?P=0:5<P&&(P=5),Object(s.V)(E,{x:E.x&&E.x.toString(),y:E.y&&E.y.toString(),fillcolor:G,fillalpha:H,fillratio:W,fillangle:z,borderthickness:X,bordercolor:K,borderalpha:Y,hovereffect:Object(s.bb)(_.showHoverEffect),radius:N&&N.toString(),link:E.link,showshadow:Object(s.db)(E.showshadow,A.shadow),_markerLabel:R,_markerId:E.id,id:(E.id+me).toLowerCase()}),delete E.tooltext,A.tooltext=!!_.showTooltip&&V,f=+E.x*L.sFactor+L.translateX,m=+E.y*L.sFactor+L.translateY,N=E.radius,"triangle"===T?(Object(s.V)(E,{type:"polygon",sides:3,startangle:_.startAngle}),k="polygon",C=3):"diamond"===T?(Object(s.V)(E,{type:"polygon",sides:4,startangle:_.startAngle}),k="polygon",C=4):"arc"===T?(y=N*we,Object(s.V)(E,{type:"arc",startangle:0,endangle:360,innerradius:y}),k="arc"):"circle"===T?(E.type="circle",k="circle"):(g=x.getShapeArgs.call(O),_.dataEnabled&&_.valueToRadius&&E.radius!==pe?delete g.radius:(!g.radius&&(g.radius=_.radius),g.radius*=P*A.autoScale),Object(s.V)(E,g),E.id=E._markerId&&E._markerId.toLowerCase(),y=g.innerradius,g.radius&&(N=g.radius),k=g.type&&g.type.toLowerCase(),C=g.sides||5,(N=+N)&&y&&N<y&&(u=N,E.radius=N=y,E.innerradius=y=u)),E.type=E.type&&E.type.toLowerCase(),Object(s.V)(E,{hoverfillcolor:Object(s.bb)(E.fillhovercolor,_.hoverFillColor,E.fillcolor),hoverfillalpha:Object(s.bb)(E.fillhoveralpha,_.hoverFillAlpha,E.fillalpha),hoverfillratio:Object(s.bb)(E.fillhoverratio,_.hoverFillRatio,E.fillratio),hoverfillangle:Object(s.bb)(E.fillhoverangle,_.hoverFillAngle,E.fillangle),hoverborderthickness:Object(s.db)(E.borderhoverthickness,_.hoverBorderThickness,E.borderthickness),hoverbordercolor:Object(s.bb)(E.borderhovercolor,_.hoverBorderColor,E.bordercolor),hoverborderalpha:Object(s.bb)(E.borderhoveralpha,_.hoverBorderAlpha,E.borderalpha)}),b={alpha:E.fillalpha,color:E.fillcolor,angle:360-E.fillangle,ratio:E.fillratio},p={alpha:E.hoverfillalpha,color:E.hoverfillcolor,angle:360-E.hoverfillangle,ratio:E.hoverfillratio},E._defaultattrs={fill:Object(s.pb)(b),"stroke-width":"0"===E.showborder?0:E.borderthickness,stroke:Object(c.c)(E.bordercolor,E.borderalpha)},E._hoverattrs={fill:Object(s.pb)(p),"stroke-width":"0"===E.showborder?0:E.hoverborderthickness,stroke:Object(c.c)(E.hoverbordercolor,E.hoverborderalpha)},"image"===E.type?(E.borderthickness=E.borderthickness||0,E.onload=function(e){let t=this.config,o=e.width,r=e.height,a={},n=(+t.x-o/(2*L.sFactor))*L.sFactor,i=(+t.y-r/(2*L.sFactor))*L.sFactor;(a=U[J]||(U[J]={})).x=n+L.translateX,a.y=i+L.translateY,a.element=O,a.shapeInfo={type:"rect",width:o,height:r},o&&r&&this.getElement().attr({x:n,y:i,width:o,height:r}),x.imageLoadCount++,x.imageLoadCount===x.imageCount&&x._buildKdTree()},E.onerror=function(){x.imageLoadCount++,x.imageLoadCount===x.imageCount&&x._buildKdTree()},x.imageCount++):((v=U[J]||(U[J]={})).x=f,v.y=m,v.element=O,v.shapeInfo={type:k,sides:C,radius:+N+E.borderthickness/2,innerradius:y}),A.drawOptions.shape=E,_.showLabels?(t=(e=x._getLabelOptions(B,h=E.labelpadding||_.labelPadding,E)).align,o=e.valign,a=A._labelBaseHeight,i=A._labelYOffset,l=_.labelWrapWidth?_.labelWrapWidth:x.getWrapWidth[t](r=A._labelBaseWidth,+e.x+(n=A._labelXOffset)),d=_.labelWrapHeight?_.labelWrapHeight:x.getWrapHeight[o](a,+e.y+i),l>h&&(l-=h),d>h&&(d-=h),A.drawOptions.label=Object(s.V)({type:"text"},{text:R,tooltext:E.tooltext,x:e.x,y:e.y,align:t,valign:e.valign,wrap:1,wrapwidth:l,wrapheight:d,fontsize:I.fontSize/L.sFactor,font:I.fontFamily,fillcolor:I.fontColor}),{markerShape:E,markerLabel:A.drawOptions.label}):{markerShape:E}}getHoverFn(){let e=this.getFromEnv("chart");return function(){let t,o,r=this.data("marker"),a=r.markerShape,n=a.unfilteredConfig,i=n._markerEventArgs,c=a.getElement(),d=c.getBBox(),h=r.config;c&&n.hovereffect&&("circle"===a.config.type&&(o={color:n.hoverfillcolor,alpha:n.hoverfillalpha,angle:360-n.hoverfillangle,ratio:n.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:"radial"===a.config.rawFillPattern},n._hoverattrs.fill=Object(s.pb)(o)),t=Object(s.V)({},n._hoverattrs),"image"===c.type&&(delete t.fill,delete t.stroke,delete t["stroke-width"]),c.attr(t)),i||(i=n._markerEventArgs={x:d.x,y:d.y,scaledX:d.x/a.groupConfig.scaleX,scaledY:d.y/a.groupConfig.scaleY,chartX:d.x+d.width/2,chartY:d.y+d.height/2,id:n.id,label:n.label}),Object(l.e)(h.options.id,"markerRollOver",i,e.getFromEnv("chartInstance"),h,pe,pe,pe)}}getHoverOutFn(){let e=this.getFromEnv("chart");return function(){let t,o=this.data("marker"),r=o.markerShape,a=r.getElement(),n=o.config;a&&r.unfilteredConfig.hovereffect&&("circle"===r.config.type&&(r.unfilteredConfig._defaultattrs.fill=Object(s.pb)({alpha:r.config.rawAlpha,color:r.config.rawColor,angle:360-r.config.rawAngle,ratio:r.config.rawRatio,radialGradient:"radial"===r.config.rawFillPattern})),t=Object(s.V)({},r.unfilteredConfig._defaultattrs),"image"===a.type&&(delete t.fill,delete t.stroke,delete t["stroke-width"]),a.attr(t)),Object(l.e)(n.id,"markerRollOut",r.unfilteredConfig._markerEventArgs,e.getFromEnv("chartInstance"),pe,pe,pe)}}getClickFn(){let e=this;return function(t){let o=this.data("marker"),r=o.config.options,a=e.getFromEnv("chart"),n=o.markerShape,i=n.config,l=this.getBBox(),s=i._markerEventArgs;s||(s=i._markerEventArgs={x:l.x,y:l.y,scaledX:l.x/n.groupConfig.scaleX,scaledY:l.y/n.groupConfig.scaleY,chartX:l.x+l.width/2,chartY:l.y+l.height/2,id:r.id,label:r.label}),a.fireChartInstanceEvent("markerClick",s,t)}}highlightPoint(e){let t,o,r,a,n,i,l,s,c,d,h=e.element,g=this,b=g.getFromEnv("chart"),p=b.graphics,u=g.getFromEnv("animationManager"),f=p.trackerElems||(p.trackerElems={}),m=e.shapeInfo,v=g.getFromEnv("toolTipController"),y=e.x,C=e.y,k=b.config.lastHoveredPoint,O=!1;return!1===e?((o=f[t=k&&k.shapeInfo.type])&&o.hide(),void(b.config.lastHoveredPoint=null)):(r={fill:Se,stroke:Se},"circle"===(t=m.type)&&(t="polygon"),o=f[t],"polygon"===t?(n=m.startAngle,l=m.radius,!o&&(O=!0),o=p.trackerElems[t]=u.setAnimation({el:p.trackerElems[t]||"polypath",container:o,attr:Object.assign({polypath:[a=m.sides||1,y,C,l,n]},r),component:g,label:"markers"})):"rect"===t?(!o&&(O=!0),o=p.trackerElems[t]=u.setAnimation({el:p.trackerElems[t]||"rect",container:o,attr:Object.assign({x:y,y:C,width:i=m.width,height:c=m.height},r),component:g,label:"markers"})):"arc"===t&&(n=(360-h.markerShape.config.startAngle)*Ee,l=m.radius,!o&&(O=!0),o=p.trackerElems[t]=u.setAnimation({el:p.trackerElems[t]||"ringpath",container:o,attr:Object.assign({ringpath:[y,C,l,s=h.markerShape.config.innerRadius,d=(360-h.markerShape.config.endAngle)*Ee,n]},r),component:g,label:"markers"})),b.config.lastHoveredPoint=e,O&&o.click(g.getClickFn()).hover(g.getHoverFn(),g.getHoverOutFn()),o.show().data("marker",h),void v.enableToolTip(o,h.config.tooltext))}_drawConnectors(){let e,t,o,r,a,n,i,l,s=this,c=s.getFromEnv("chart"),d=c.config.annotationConfig,h=s.components.connectors||(s.components.connectors=[]),g=h.length,b=c.config.scalingParams,p=c.config.connectorOpts,u=p.showLabels,f=c.getChildren("mapAnnotations")[0],m=[],v=[],y=[];for(y.push({id:"connectorLabels",fillalpha:"100",items:v}),y.push({id:"connectors",fillalpha:"100",items:m}),f.addGroup(Object.assign(d,y[1]),s),f.addGroup(Object.assign(d,y[0]),s),t=0;t<g;t++)h[t]&&(r=(i=h[t].config.fromMarker.config).options.y,a=(l=h[t].config.toMarker.config).options.x,n=l.options.y,h[t].config.x=o=i.options.x,h[t].config.y=r,h[t].config.tox=a,h[t].config.toy=n,m.push(h[t].config),(e=f.addItem("connectors",Object.assign({animationLabel:"markerItem"},h[t].config),!0,s)).addEventListener("mouseover",h[t].config.onmouseover),e.addEventListener("mouseout",h[t].config.onmouseout),e.addEventListener("click",h[t].config.onclick),h[t].labelConfig&&u&&(h[t].labelConfig.x=((+o+ +a)/2).toString(),h[t].labelConfig.y=((+r+ +n)/2).toString(),h[t].labelConfig.fontsize=p.fontSize/(b.scaleFactor*c.config.baseScaleFactor),v.push(h[t].labelConfig),f.addItem("connectorLabels",Object.assign({animationLabel:"markerItem"},h[t].labelConfig),!0,s)))}getShapeArgs(){let e,t=this.config,o=Object(s.V)({},this.shapeObj);return t.autoScale=1,o?("polygon"===o.type?3>o.sides?o.type="circle":o.startangle=t.startAngle:"arc"===o.type&&(o.radius=e=(o.radius||t.markerRadius)*t.autoScale,o.innerradius=o.innerradius&&o.innerradius*t.autoScale||e*we),o):null}_getLabelOptions(e,t,o,r,a){let n,i,l,s=e&&e.toLowerCase();return this.getLabelAlignment[s]||(s="center"),i=+o.x,l=+o.y,n=r===pe||a===pe?o.radius||0:/^(top|bottom)$/gi.test(s)&&.5*a||/^(left|right)$/gi.test(s)&&.5*r||0,this.getLabelAlignment[s](i,l,n=+n+ +t)}addMarkerItem(e){let t,o,r,a,n,i,l=this,c=l.getFromEnv("chart"),d=e,h=l.components.markerObjs,g=l.components.shapeObjs,b=l.components.markerGroup,p=l.components.markerLabelGroup,u=c.getChildren("mapAnnotations")[0],f=l.getFromEnv("number-formatter"),m=c.config.markerOpts;if(i=d.id.toLowerCase()){if(h[i])return;delete d.value,l.imageLoadCount=0,(t=Te._initializeMarkerItem(i,d,null)).dataset=l,n=t.config.options.shapeid,(r=t.config).cleanValue=f.getCleanValue(a=d.value),e=r.options,r.formattedValue=null===r.cleanValue?pe:f.dataLabels(a),r.fillColor=Object(s.bb)(e.fillcolor,e.color,m.fillColor),r.fillAlpha=Object(s.bb)(e.fillalpha,e.alpha,m.fillAlpha),r.fillRatio=Object(s.bb)(e.fillratio,m.fillRatio),r.fillAngle=Object(s.bb)(e.fillangle,m.fillAngle),r.borderThickness=Object(s.db)(e.borderthickness,m.borderThickness),r.borderColor=Object(s.bb)(e.bordercolor,m.borderColor),r.borderAlpha=Object(s.bb)(e.borderalpha,m.borderAlpha),r.labelPadding=e.labelpadding||m.labelPadding,r.options.tooltext=Object(s.bb)(e.tooltext,m.tooltext),r.link=e.link,n&&(t.shapeObj=g[n&&n.toLowerCase()]),h[i]=t,o=l._drawMarkerItem.call(t),b&&p&&(t.markerShape=o.markerShape&&u.addItem(b.getId(),Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},o.markerShape),!0,l),t.markerLabel=o.markerLabel&&u.addItem(p.getId(),Object.assign({animationLabel:"markerItem"},o.markerLabel),!0,l)),l._buildKdTree()}}updateMarkerItem(e,t){let o,r,a,n,i=this,l=i.getFromEnv("chart"),c=l.getChildren("mapAnnotations")[0],d=l.config.markerOpts,h={},g=i.components.markerObjs[e];if(g){for(r in o=g.config.options,Object(s.V)(o,t),i.imageLoadCount=0,a=g.config,t)h[r.toLowerCase()]=t[r]&&t[r].toString();a.fillColor=Object(s.bb)(h.fillcolor,h.color,d.fillColor),a.fillAlpha=Object(s.bb)(h.fillalpha,h.alpha,d.fillAlpha),a.fillRatio=Object(s.bb)(h.fillratio,d.fillRatio),a.fillAngle=Object(s.bb)(h.fillangle,d.fillAngle),a.borderThickness=Object(s.db)(h.borderthickness,d.borderThickness),a.borderColor=Object(s.bb)(h.bordercolor,d.borderColor),a.borderAlpha=Object(s.bb)(h.borderalpha,d.borderAlpha),a.labelPadding=h.labelpadding||d.labelPadding,a.options.tooltext=Object(s.bb)(h.tooltext,d.tooltext),a.link=h.link,n=i._drawMarkerItem.call(g).markerShape,i._buildKdTree(),c.update(e,n)}}_removeMarkerItem(e){let t,o,r=this.components,a=r.markerObjs,n=a[e],i=r.kdArrayMap;n&&(o=n.markerLabel,(t=n.markerShape)&&t.dispose(),o&&o.dispose(),delete i[e],this._buildKdTree()),delete a[e]}getElement(e){if(this.components.kDTree)return this.components.kDTree.getNeighbour(e)}}var Pe=Te;Object(g.a)({name:"mapsAnimation",type:"animationRule",extension:p});var Re=function(e){var t,o=e.getFromEnv("dataSource"),r=o.data||{},n=o.markers;Object(s.N)(e,class extends a.a{getType(){return"group"}getName(){return"mapGroup"}configure(){this._mapChildren(e=>{e.configure&&e.configure()})}createContainer(){let e,t=this,o=t.getLinkedParent(),r=t.getFromEnv("animationManager");e=o.getChildContainer().plotGroup,t.getChildContainer("plotShadow")||t.addChildContainer("plotShadow",r.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:e,component:t,label:"group"})),t.getChildContainer("plot")||t.addChildContainer("plot",r.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:e,component:t,label:"group"}))}_transformGroup(){let e=this,t=this.getFromEnv("chart"),o=t.getFromEnv("chartInstance"),r=e.getFromEnv("animationManager"),a=e.getChildContainer("plot"),n=e.getChildContainer("plotShadow"),i=t.config.scalingParams;a.hide(),n.hide(),t.config.entitiesReady=!1,o.addEventListener("internal.mapdrawingcomplete",function(t){t.detachHandler(),s.Ma&&(a&&r.setAnimation({el:a,attr:{transform:i.transformStr},component:e,label:"group"}),n&&r.setAnimation({el:n,attr:{transform:i.transformStr},component:e,label:"group"})),a.show(),n.show()}),t.checkComplete()}draw(){this.createContainer(),this._transformGroup()}getDataLimits(e){let t,o=1/0,r=-1/0,a=0,n=function(e){r=Math.max(r,e.max),o=Math.min(o,e.min)};return this._mapChildren(o=>o.getState("removed")||!1===o.getState("visible")?void(e&&(t=o.getDataLimits(e),n(t))):(a++,t=o.getDataLimits(e),void n(t))),this.setState("visible",!!a),this.config.range||(this.config.range={},this.config.range.min=this.config.dataMin,this.config.range.max=this.config.dataMax),{max:r,min:o}}},"mapGroup"),t=e.getChildren("mapGroup")[0],Object(s.R)(t,Q,"entities",1,[r]),n?Object(s.R)(t,Pe,"markers",1,[n]):e.getDatasets()[1]&&e.getDatasets()[1].remove()},Me=o("KmlC"),Be=o("sUdG");let De=(e,t,o)=>{var r,a,n=Math.round,i=e.value,l=e.code,s=Object(c.a)(l),d=t.value,h=t.code,g=Object(c.a)(h);return a=[n(s[0]+(g[0]-s[0])/(r=d-i)*(o-i)),n(s[1]+(g[1]-s[1])/r*(o-i)),n(s[2]+(g[2]-s[2])/r*(o-i))],Object(c.b)(a)};function Ve(e){return Object(c.j)(e||Ge)||Ge}let Ne="rgba(192,192,192,"+(s.Sa?.002:1e-6)+")",Ge="#000000",He=function(){var e,t={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return t.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(s.pb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},t.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:Ne,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:Ne,stroke:"#FFFFFF"}}},t.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){e=t.chart},legacyDataParser:function(t,o){var r,a,n,i,l,d,h,g,b,p,u,f,m=Math.max,v=Math.min,y={},C=e.getFromEnv("number-formatter"),k=e.getFromEnv("dataSource"),O=k.dataset,x=k.data;if(o=o||{},!t)return!1;for("maps"!==e.defaultDatasetType||void 0!==o.min&&void 0!==o.max?"HeatMap"===e.getName()&&(void 0===o.min||void 0===o.max)&&(o={min:1/0,max:-1/0},O.forEach(e=>{e.data&&e.data.forEach(e=>{o.min=v(o.min,Object(s.db)(e.value,o.min)),o.max=m(o.max,Object(s.db)(e.value,o.max))})})):(o={min:1/0,max:-1/0},x&&x.forEach(e=>{o.min=v(o.min,Object(s.db)(e.value,o.min)),o.max=m(o.max,Object(s.db)(e.value,o.min))})),y.mapByPercent=u=!!Object(s.db)(t.mapbypercent,0),r=t.color||[],void 0===t.minvalue&&(t.minvalue=void 0===o.min?0:u?0:o.min),void 0===t.maxvalue&&(t.maxvalue=void 0===o.max?100:u?100:o.max),(t.maxvalue===t.minvalue||o.min===1/0||o.max===-1/0)&&(t.minvalue=0,t.maxvalue=100),f=!1,l=0,h=r.length;l<h;l++)if(r[l].maxvalue){f=!0;break}for(f||(r=[]),n=t.code,g=y.colorRange=[],y.gradient=!!Object(s.db)(t.gradient,1),r.length?n=Ve(n):(n?(i=Ve(n),n=Ve()):i=function(e){return Object(c.h)(e,1)}(n=Ve()),r.push({code:i,maxvalue:t.maxvalue,label:void 0})),function(t){var o,r,a,n=e.getFromEnv("number-formatter");for(o=0,r=t.length;o<r;o++)(a=t[o].maxvalue)&&(t[o].maxvalue=n.getCleanValue(a))}(r),r=r.sort(function(e,t){return e.maxvalue-t.maxvalue}),b=p=t.minvalue&&C.getCleanValue(t.minvalue),p=(void 0!==b||null!==b)&&(u?b+"%":C.legendValue(b)),g.push({code:Object(s.T)(n),value:b,displayValue:p,label:t.startlabel}),l=0,h=r.length;l<h;l++)d=Ve((a=r[l]).code||a.color),b=p=a.maxvalue,!isNaN(parseInt(b,10))&&(p=(void 0!==b||null!==b)&&(u?b+"%":C.legendValue(b)),g.push({code:Object(s.T)(d),value:b,displayValue:p,label:a.label||a.displayvalue}));return g[g.length-1].label=t.endlabel||a.label,y},getDefaultConf:function(e){return t[e]}}}();var We=function(e){!function(e){let t=e.getChildren("colorManager");e.getFromEnv("dataSource").colorrange?t?(e.addToEnv("colorManager",t[0]),t[0].configure()):(t=new class extends a.a{constructor(){super(),this.datasource={},this.config.legendItemIds=[]}configure(){let e,t,o,r=this,n=this.getFromEnv("chart"),i="maps"===n.defaultDatasetType,l="TreeMap"===n.getName(),c=this.getFromEnv("dataSource").chart.mapbycategory,d=n.getFromEnv("number-formatter"),h=n.config.showLegend,g=n.getChildren("colorRange")&&n.getChildren("colorRange")[0];n.addToEnv("colorManager",r),r.datasource=n.getFromEnv("dataSource"),e=r.datasource.colorrange,g&&g.remove({instant:!0}),h||(r.config.legendItemIds=[]),"gradient"==(t=i?e.gradient&&+e.gradient?"gradient":e.color?"icon":"none":l?"gradient":e.gradient&&"0"!=e.gradient&&!+c?"gradient":"icon")?(He.init({chart:n}),o=He.legacyDataParser(e),Object(s.N)(n,class extends a.a{constructor(){super(),this.colorRange={},this.valueRatio={},this.data={},this.mapByPercent=void 0}getType(){return"colorComponent"}getName(){return"gradientColorRange"}configure(e){if(!e)return;let t,o,r,a=this;for(a.data=e,a.appender="",r=a.colorRange=e.colorRange.sort(function(e,t){return e.value-t.value}),a.valueRatio=void 0,a.values=[],t=0,o=r.length;t<o;t++)a.values.push(r[t].value)}getValueRatio(){var e,t,o=this.colorRange,r=o.length,a=this.valueRatio,n=o[r-1].value,i=o[0].value,l=0;if(a)return a;for(a=this.valueRatio=[],e=0;e<r;e++)a.push(100*((t=(o[e].value-i)/(n-i))-l)),l=t;return a}getCumulativeValueRatio(){var e,t=this.colorRange,o=t.length,r=t[0].value,a=t[o-1].value,n=[];for(e=0;e<o;e++)n.push((t[e].value-r)/(a-r)*100);return n}getBoxFill(e){var t,o,r,a=this.colorRange,n=a.length,i=[];for(r=e?90:0,t=0;t<n;t++)i.push(a[t].code);return o={FCcolor:{alpha:"100,100,100",angle:r,color:i.join(","),ratio:this.getValueRatio().join(",")}},Object(s.pb)(o)}getColorByValue(e){var t,o,r,a,n=this.values,i=this.colorRange;if(void 0!==e&&null!==e){for(o=0,t=n.length;o<t;o++){if(e===n[o]){a=i[o].code;break}if(!o&&e<n[o]){r=!0;break}if(o===t-1&&e>n[o]){r=!0;break}if(e>n[o]&&e<n[o+1]){a=De(i[o],i[o+1],e);break}}return r?void 0:a}}},"colorRange",1,[o]),g=n.getChildren("colorRange")[0],n.addToEnv("colorRange",g),o||(g._dontPlot=!0),r.config.legendItemIds=[],r._configureGradientLegend(g)):"icon"===t?(Object(s.N)(n,Be.a,"colorRange",1,[{colorRange:e,sortLegend:0,mapByCategory:Object(s.db)(c,0),defaultColor:"cccccc",numberFormatter:d}]),n.addToEnv("colorRange",n.getChildren("colorRange")[0]),h&&r._addLegendItems()):"none"===t&&(n.deleteFromEnv("colorManager"),r.config.legendItemIds=[])}_configureGradientLegend(e){let t=this,o=t.getFromEnv("chart").getFromEnv("gLegend");o&&(o.setColorRange(e),t.addExtEventListener("rangeUpdated",function(e,o){t.fireEvent("legendUpdate",{"original-event":e,maxMinArray:o,component:"gradientlegend"})},o))}_addLegendItems(){let e,t,o,r,a,n=this,i=n.config,l=n.getFromEnv("chart"),d=l.getChildren("legend")[0],h=l.getFromEnv("colorRange").colorArr,g=h.length;for(r=0;r<g;r++)a={label:Object(s.bb)(h[r].label,h[r].displayvalue),datasetObj:h[r],index:r},t=Object(c.h)(h[r].code,40),e={FCcolor:{color:h[r].code+","+h[r].code+","+t,ratio:"0,70,30",angle:270,alpha:"100,100,100"}},(o=d.getItem(i.legendItemIds[r]))||(i.legendItemIds.push(d.createItem(n)),(o=d.getItem(i.legendItemIds[r])).addEventListener("click",o.itemClickFn)),o.removeLegendState("hidden"),h[r].legendItemId=o&&o.getId(),o.configure(a),o.setStateCosmetics("default",{symbol:{fill:Object(s.pb)(e),rawFillColor:h[r].code}});for(r=g;r<i.legendItemIds.length;r++)d.disposeItem(i.legendItemIds[r]);i.legendItemIds.splice(g)}legendInteractivity(e){let t=this.getFromEnv("colorRange").colorArr[e.config.index];this.fireEvent("legendUpdate",{legendItem:e,colorObj:t,component:"legend"})}getColor(e){let t=this;return!+t.datasource.chart.mapbycategory&&+t.datasource.colorrange.gradient?{code:t.getColorByValue(e)}:t.getColorObj(e)}getValueRatio(){return this.getFromEnv("colorRange").getValueRatio()}getCumulativeValueRatio(){return this.getFromEnv("colorRange").getCumulativeValueRatio()}getBoxFill(e){return this.getFromEnv("colorRange").getBoxFill(e)}getColorByValue(e){return this.getFromEnv("colorRange").getColorByValue(e)}getColorObj(e){return this.getFromEnv("colorRange").getColorObj(e)}},e.attachChild(t,"colorManager"),e.addToEnv("colorManager",t),t.configure()):(t&&(t[0].config.legendItemIds=[]),e.deleteFromEnv("colorManager"))}(e)};let ze,Xe,Ke,Ye,Ue={},Je="rgba(192,192,192,"+(s.Sa?.002:1e-6)+")",Ze="#000000",qe={}.hasOwnProperty;function $e(e,t){return function e(t,o){var r,a;for(a in t)qe.call(t,a)&&(r=t[a],o[a]===ze?o[a]=r:"object"==typeof r&&null!==r&&e(r,o[a]))}(e,t),t}function Qe(e){return Object(c.j)(e||Ze)||Ze}function et(e){var t,o=e.fontSize+"";return o?(t=o.replace(/(\d+)(px)*/,"$1px"),e.fontSize=t,e):e}function tt(e){return!(e!==ze&&void 0!==e&&null!==e&&!isNaN(e))}var ot,rt;Ue.CAPTION="CAPTION",Ue.LEGEND_BODY="LEGEND_BODY",Ue.AXIS_LABEL="LEGEND_LABEL",Ue.LEGEND_AXIS="LEGEND_AXIS",Ue.RANGE="RANGE",Ue.AXIS_VALUE="AXIS_VALUE",(rt={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}}).legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(s.pb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},rt.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:Je,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:Je,stroke:"#FFFFFF"}}},rt.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},Xe={init:function(e){ot=e.chart},legacyDataParser:function(e,t){var o,r,a,n,i,l,d,h,g,b,p,u,f,m={},v=ot.getFromEnv("number-formatter");if(!e)return!1;for(m.mapByPercent=p=!!Object(s.db)(e.mapbypercent,0),o=e.color||[],e.minvalue===ze&&(e.minvalue=t.min===ze?0:p?0:t.min),e.maxvalue===ze&&(e.maxvalue=t.max===ze?100:p?100:t.max),u=!1,i=0,d=o.length;i<d;i++)if(o[i].maxvalue){u=!0;break}for(u||(o=[]),a=e.code,h=m.colorRange=[],m.gradient=!!Object(s.db)(e.gradient,1),o.length?a=Qe(a):(a?(n=Qe(a),a=Qe()):(f=a=Qe(),n=Object(c.h)(f,1)),o.push({code:n,maxvalue:e.maxvalue,label:ze})),function(e){var t,o,r,a=ot.getFromEnv("number-formatter");for(t=0,o=e.length;t<o;t++)(r=e[t].maxvalue)&&(e[t].maxvalue=a.getCleanValue(r))}(o),o=o.sort(function(e,t){return e.maxvalue-t.maxvalue}),g=b=e.minvalue&&v.getCleanValue(e.minvalue),b=(g!==ze||null!==g)&&(p?g+"%":v.legendValue(g)),h.push({code:Object(s.T)(a),value:g,displayValue:b,label:e.startlabel}),i=0,d=o.length;i<d;i++)l=Qe((r=o[i]).code||r.color),g=b=r.maxvalue,!isNaN(parseInt(g,10))&&(b=(g!==ze||null!==g)&&(p?g+"%":v.legendValue(g)),h.push({code:Object(s.T)(l),value:g,displayValue:b,label:r.label||r.displayvalue}));return h[h.length-1].label=e.endlabel||r.label,m},getDefaultConf:function(e){return rt[e]}};class at{constructor(e){this.conf=e,this.node=[],this._id="GL_LABELS"}configure(e){this.conf=e}getType(){return"label"}getName(){return"LegendLabel"}getEffectivePlotArea(e){var t=this.conf.padding;return e.height-=2*t.v,e.width-=2*t.h,e.x+=t.h,e.y+=t.v,e}getLogicalSpace(e,t,o){var r,a,n,i,l,s,c,d,h,g,b,p,u,f,m,v,y,C,k,O,x,w,F=Math.max,j="bottom"===this.conf.legendPosition,L=this._lSpace,A=this.conf,E=A.padding,S=[],_=t.gLegend.getFromEnv("chartConfig"),I=[];if(L&&!o)return L.isImpure=!0,L;for(a=t.smartLabel,g=(r=t.colorRange).getCumulativeValueRatio(),n=r.colorRange,u=(L=this._lSpace={bound:{height:0,width:0},node:{logicArea:ze,smartTexts:[]}}).node.smartTexts,d=$e(e,{}),m=this.getEffectivePlotArea(d),w=j?m.width:m.height,a.useEllipsesOnOverflow(_.useEllipsesWhenOverflow),x=$e(A.style,{}),et(this._metaStyle=x),a.setStyle(x),v=a.getSmartText("W"),i=0,l=n.length;i<l;i++)(h=n[i].label)?I.push({oriIndex:i,label:h}):u[i]=ze;if(0===(l=I.length))return{height:0,width:0};for(p=b=1<l?(g[I[l-1].oriIndex]-g[I[0].oriIndex])/2*w/100:F(g[I[0].oriIndex],100-g[I[0].oriIndex])/2*w/100,j?((k=a.getSmartText(I[0].label,p,m.height)).x=g[I[0].oriIndex]*m.width/100,s=k.x+k.width):((k=a.getSmartText(I[0].label,p,m.width)).y=g[I[0].oriIndex]*m.height/100,s=k.y+k.width),S.push(k.height),u[I[0].oriIndex]=k,j?((k=a.getSmartText(I[l-1].label,p,m.height)).x=g[I[l-1].oriIndex]*m.width/100,c=k.x-k.width):((k=a.getSmartText(I[l-1].label,p,m.width)).y=g[I[l-1].oriIndex]*m.height/100,c=k.y-k.width),S.push(k.height),u[I[l-1].oriIndex]=k,C=s,i=1;i<l-1;i++)h=I[i].label,O=I[i].oriIndex,k=ze,y=g[I[i].oriIndex]*w/100,(b=Math.min(y-C,(i+1===l-1?c:g[I[i+1].oriIndex]*w/100)-y))>2*v.width&&(j?(k=a.getSmartText(h,b,m.height)).x=g[O]*m.width/100:(k=a.getSmartText(h,b,m.width)).y=g[O]*m.height/100,C=b,S.push(k.height)),u[I[i].oriIndex]=k;return f=F.apply(Math,S),j?(m.height=f,e.height=f+2*E.v):(m.width=f,e.width=f+2*E.v),L.node.logicArea=m,L.bound=e,e}draw(){var e,t,o,r,a,n,i,l,s,c,d,h,g="bottom"===this.conf.legendPosition,b=this.conf,p=b.bound&&b.bound.style||{stroke:"none"},u={};2<=arguments.length&&arguments[1]?(r=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),h=i.animationManager,e=i.parentLayer,this.getLogicalSpace(r,i),s=(n=this._lSpace).node.logicArea,c=n.node.smartTexts,this.group=o=h.setAnimation({el:this.group||"group",attr:{name:"legend-labels"},container:e,component:Ye}),this.bound=t=h.setAnimation({el:this.bound||"rect",attr:n.bound,css:p,container:o,component:Ye});for(let f=0;f<this.node.length;f++)this.node[f].remove();for(this.node=[],l=0,d=c.length;l<d;l++)(a=c[l])&&(g?(u.y=s.y+a.height/2,u.x=l===d-1?s.x+a.x-a.width/2:l?s.x+a.x:s.x+a.x+a.width/2):(u.x=s.x+a.height/2,u.y=l===d-1?s.y+a.y-a.width/2:l?s.y+a.y:s.y+a.y+a.width/2),this.node.push(h.setAnimation({el:"text",attr:{text:a.text,x:u.x,y:u.y,lineHeight:this._metaStyle.lineHeight,fill:b.style.fill,transform:g?"R0":"R270,"+u.x+","+u.y},container:o,component:Ye})));return{group:o,bound:t,node:this.node}}}class nt{constructor(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.node=ze,this.tracker=ze,this.currPos=0,this.swing=[]}configure(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.currPos=0,this.swing=[]}getType(){return"slider"}getName(){return"Slider"}updateSwingRange(e,t){this.swing[+e]=t}draw(e,t,o,r){var a,n,i,l,s,c,d=Math.ceil,h=r.parentLayer,g=r.animationManager,b=this.conf,p=b.outerCircle,u=b.innerCircle,f=d(p.rFactor*r.rCalcBase/2),m=d(u.rFactor*r.rCalcBase/2),v=f-m,y=this.sliderIndex;return b.outerRadius=f,b.innerRadius=m,this._scaleVal=t,u.style["stroke-width"]=v,m+=i=d(p.style["stroke-width"]/2),a=this.node=g.setAnimation({el:this.node||"group",attr:{name:"fc-gl-slider",cursor:"pointer",transform:"t0,0"},container:h,component:Ye}),"x"===r.key?(l=o,s=e,s+=y?-m:+m):(l=e,s=o,l+=y?-m:+m),this.oCircle=g.setAnimation({el:this.oCircle||"circle",attr:{cx:l,cy:s,r:f},css:p.style,container:a,component:Ye}),this.iCircle=g.setAnimation({el:this.iCircle||"circle",attr:{cx:l,cy:s,r:m},css:u.style,container:a,component:Ye}),c=this.tracker=g.setAnimation({el:this.tracker||"circle",attr:{cx:l,cy:s,r:f+5,fill:Je,stroke:Je,cursor:"pointer"},container:a,component:Ye}),a.attr({transform:"x"===r.key?"t0,"+this.currPos:"t"+this.currPos+",0"}),Ke.enableToolTip(c,t),this._dragAPI=n=this.getDragAPI("x"===r.key),c.undrag(),c.drag(n.dragging,n.dragStart,n.dragEnd),{translateAscending:f+i}}getDragAPI(e){var t,o,r,a,n=this,i=n.node,l=n.sliderIndex,s=n.rangeGroup,c=n.conf.innerRadius;return{dragging:function(d){var h,g,b,p,u;return d.stopPropagation(),d.preventDefault(),b=e?d.data[1]:d.data[0],l?(h=t[0]-t[1]+c,g=0):(h=0,g=t[1]-t[0]-c),(u=n.currPos+b)<h?b+=h-u:u>g&&(b-=u-g),i.attr({transform:e?"t0,"+(n.currPos+b):"t"+(n.currPos+b)+",0"}),o=b,r&&clearTimeout(r),r=setTimeout(function(){s.updateWhenInRest(n,n.currPos+b)},100),p=s.updateWhenInMove(n,n.currPos+b),n.tracker.data("__FC_tooltipText",p),a=!0,!0},dragStart:function(e){e.stopPropagation(),e.preventDefault(),t=n.swing,a=!1,s.dragStarted(n)},dragEnd:function(){s.dragCompleted(n,a,n.currPos+o),a&&(r&&clearTimeout(r),r=setTimeout(function(){s.updateWhenInRest(n,n.currPos)},100),n.currPos+=o,s.updateRange(n,t[+l]+n.currPos))}}}dispose(){this.node.remove(),this.oCircle.remove(),this.iCircle.remove(),this.tracker.remove()}}var it=o("3SBL"),lt=function(e){!function(e){let t,o=e.getFromEnv("dataSource").colorrange,r=e.getFromEnv("dataSource").chart.mapbycategory,n="maps"===e.defaultDatasetType,i="TreeMap"===e.getName(),l=e.getFromEnv("legend"),d=e.getFromEnv("gLegend");"gradient"==(t=o&&e.config.showLegend?n?o.gradient&&+o.gradient?"gradient":o.color?"icon":"none":i?o.gradient&&"0"!=o.gradient?"gradient":"none":o.gradient&&"0"!=o.gradient&&!+r?"gradient":"icon":"none")?(e.deleteFromEnv("legend"),l&&l.remove(),Object(s.N)(e,class extends a.a{getType(){return"gradientLegend"}getName(){return"gLegend"}constructor(){super(),Ye=this,this.enabled=!1,this.drawOptions={},this.components={}}setColorRange(e){let t=this.drawOptions.colorRange=e;t&&t._preparationGoneWrong&&(this._dontPlot=!0)}configureAttributes(){var e,t,o,r,a,n,i,l,d,h,g=this,b=g.getFromEnv("chart"),p=g.getFromEnv("dataSource").chart,u=g.conf={},f=p.outcnvbasefont,m=p.outcnvbasefontsize,v=p.outcnvbasefontcolor,y=b.config.dataLabelStyle;Xe.init({chart:b}),g.data=g.getFromEnv("dataSource").colorrange,g._dontPlot||(g.drawOptions={smartLabel:g.getFromEnv("smartLabel"),gLegend:g},g._dontPlot=!1,g._recalculateLogicalSpace=!0,Ke=g.getFromEnv("toolTipController"),u.caption=Object(s.bb)(p.legendcaption),u.legendPosition=Object(s.bb)(p.legendposition,"bottom").toLowerCase(),u.showLegend=Object(s.db)(p.showlegend,1),u.interactiveLegend=Object(s.db)(p.interactivelegend,1),u.showLegendLabels=Object(s.db)(p.showlegendlabels,1),e=p.legenditemfontcolor||v,t=p.legenditemfont||f,o=p.legenditemfontsize||m,r=Object(s.db)(p.legenditemfontbold,0),a=p.legendcaptionfontcolor||v,n=p.legendcaptionfont||f,i=p.legendcaptionfontsize||m,l=Object(s.db)(p.legendcaptionfontbold,1),h=(d=p.legendaxisbordercolor?Object(s.Oa)(Object(s.T)(p.legendaxisbordercolor)):ze)?Object(s.db)(p.legendaxisborderalpha,100)/100:ze,u.axisTextItemConf={style:{fill:e?Object(c.c)(Object(s.bb)(e)):y.color,fontFamily:t?Object(s.bb)(t):y.fontFamily,fontSize:o?Object(s.db)(o):y.fontSize.match(/\d+/)[0],fontWeight:r?"bold":y.fontWeight}},u.legendCaptionConf={style:{fill:a?Object(c.c)(Object(s.bb)(a)):y.color,fontFamily:n?Object(s.bb)(n):y.fontFamily,fontSize:i?Object(s.db)(i):y.fontSize.match(/\d+/)[0],fontWeight:l?"bold":y.fontWeight,fontStyle:"normal"}},u.legendAxisConf={legendAxisHeight:11,style:{stroke:d,"stroke-opacity":h},line:{style:{stroke:Object(c.c)(Object(s.bb)(p.legendscalelinecolor,"FFF8E9"),Object(s.db)(p.legendscalelinealpha,100)),"stroke-width":Object(s.db)(p.legendscalelinethickness)}}},u.sliderGroupConf={showTooltip:Object(s.db)(p.showtooltip,1),outerCircle:{rFactor:Object(s.db)(p.sliderdiameterfactor),style:{stroke:Object(c.c)(Object(s.bb)(p.legendpointerbordercolor,"757575"),Object(s.db)(p.legendpointerborderalpha,100))}},innerCircle:{rFactor:Object(s.db)(p.sliderholediameterfactor),style:{stroke:Object(c.c)(Object(s.bb)(p.legendpointercolor,"FFFFFF"),Object(s.db)(p.legendpointeralpha,100))}}},u.legendCarpetConf={spreadFactor:Object(s.db)(p.legendspreadfactor),allowDrag:!!Object(s.db)(p.legendallowdrag,0),captionAlignment:Object(s.bb)(p.legendcaptionalignment,"center"),style:{fill:Object(c.c)(Object(s.bb)(p.legendbgcolor,"e4d9c1"),Object(s.db)(p.legendbgalpha,100)),stroke:Object(c.c)(Object(s.bb)(p.legendbordercolor,"c4b89d"),Object(s.db)(p.legendborderalpha,100)),"stroke-width":Object(s.db)(p.legendborderthickness,1)}})}postConfigureInit(){var e,t,o,r,a,n,i,l,c,d,h,g=this,b=g.conf;g.elem={},b.interactiveLegend?(r=$e(Xe.getDefaultConf("sliderGroupConf"),b.sliderGroupConf),this.sGroup?((o=g.elem.sGroup=this.sGroup).configure(r),g.elem.sGroup.gLegend=g):(this.sGroup=g.elem.sGroup=o=new class{constructor(e){var t={};this._id="GL_SG1",this.conf=e,t.conf=e,this.extremes=[],this.sliders={},this.min=void 0,this.max=void 0,t.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[!1]=new nt(!1,t,this._id+"_0"),this.sliders[!0]=new nt(!0,t,this._id+"_1")}configure(e){var t={};this.min=void 0,this.max=void 0,this.conf=e,t.conf=e,t.sliderGroup=this,this.sliders[!1].configure(!1,t,this._id+"_0"),this.sliders[!0].configure(!0,t,this._id+"_1")}getType(){return"slider"}getName(){return"SliderGroup"}initRange(e,t){this.extremes[+e.sliderIndex]=t}updateRange(e,t){var o=e.sliderIndex;this.sliders[!o].updateSwingRange(o,t)}reset(){var e={};e.conf=this.conf,e.sliderGroup=this,this.min=void 0,this.max=void 0,this.sliders[!1].configure(!1,e,this._id+"_0"),this.sliders[!0].configure(!0,e,this._id+"_1"),this.draw.apply(this,this._drawParams)}draw(e,t,o){var r,a,n,i,l,s=Math.ceil,c=this.sliders,d=c[!1],h=c[!0],g=o.colorRange,b=g.colorRange,p=g.data.mapByPercent,u=o.gLegend.getFromEnv("number-formatter");return this._fcChart=o.gLegend.getFromEnv("chart"),this.getValueFormPixel=function(e,t,o,r){this.getValueFormPixel=function(a){return e+(t-e)/(r-o)*a}},this.updateWhenInMove=function(e,t){this.updateWhenInMove=function(o,r){var a,n=this.extremes;return a=this.getValueFormPixel(o.sliderIndex?n[1]-n[0]+r:r),t?parseFloat(a).toFixed(2)+"%":e.legendValue(a)}},this._drawParams=[e,t,o],this.updateWhenInMove(u,p),a=d.conf.outerCircle,n=s(d.conf.innerCircle.rFactor*o.rCalcBase/2),n+=s(a.style["stroke-width"]/2),this.extremes[0]=e+n,this.extremes[1]=t-n,i=this.extremes[1]-this.extremes[0],this.min=this.min?this.min:b[0].value,this.max=this.max?this.max:b[b.length-1].value,d.currPos=i*(this.min-b[0].value)/(l=b[b.length-1].value-b[0].value),h.currPos=i*(this.max-b[0].value)/l-i,d.draw(e,p?u.legendPercentValue(this.min):u.legendValue(this.min),o[o.key],o),r=h.draw(t,p?u.legendPercentValue(this.max):u.legendValue(this.max),o[o.key],o),d.swing=this.extremes.slice(0),h.swing=this.extremes.slice(0),d.swing[1]+=h.currPos,h.swing[0]+=d.currPos,this.getValueFormPixel(b[0].value,b[b.length-1].value,this.extremes[0],this.extremes[1]),r}updateWhenInRest(e,t){var o,r,a=this.sliders,n=this.extremes,i=e.sliderIndex;i?(o=a[!i].currPos,r=n[1]-n[0]+t):(o=t,r=n[1]-n[0]+a[!i].currPos),this.min=+this.getValueFormPixel(o).toFixed(2),this.max=+this.getValueFormPixel(r).toFixed(2),this.gLegend.fireEvent("rangeUpdated",[{min:this.min,max:this.max}])}dragStarted(e){var t=this.sliders,o=this.extremes,r=e.conf,a=this._fcChart;a.fireChartInstanceEvent("legendpointerdragstart",{pointerIndex:+e.sliderIndex,pointers:[{value:this.getValueFormPixel(t.false.currPos)},{value:this.getValueFormPixel(o[1]-o[0]+t.true.currPos)}],legendPointerHeight:r.outerRadius,legendPointerWidth:r.innerRadius,outerRadius:r.outerRadius,innerRadius:r.innerRadius},[a.id])}dragCompleted(e,t,o){var r,a,n=this.sliders,i=this.extremes,l=e.conf,s=this.getValueFormPixel(n.false.currPos),c=this.getValueFormPixel(i[1]-i[0]+n.true.currPos),d=this._fcChart;e.sliderIndex?(r=s,a=this.getValueFormPixel(i[1]-i[0]+o)):(r=this.getValueFormPixel(o),a=c),t&&d.fireChartInstanceEvent("legendrangeupdated",{previousMinValue:s,previousMaxValue:c,minValue:r,maxValue:a},[d.id]),d.fireChartInstanceEvent("legendpointerdragstop",{pointerIndex:+e.sliderIndex,pointers:[{value:r},{value:a}],legendPointerHeight:l.outerRadius,legendPointerWidth:l.innerRadius,outerRadius:l.outerRadius,innerRadius:l.innerRadius},[d.id])}dispose(){this.sliders[!1].dispose(),this.sliders[!0].dispose()}}(r),o.configure(r),g.elem.sGroup.gLegend=g)):(this.sGroup&&this.sGroup.dispose(),this.sGroup&&delete this.sGroup),(r=$e(Xe.getDefaultConf("legendCarpetConf"),b.legendCarpetConf)).legendPosition=b.legendPosition,h=Xe.getDefaultConf("legendBodyConf"),"bottom"===b.legendPosition?(g.drawOptions.refSideKey="canvasWidth",g.drawOptions.refOffsetKey="canvasLeft",a=$e(Xe.getDefaultConf("axisTextItemConf"),b.axisTextItemConf),h.legendPosition="bottom",(d=$e(Xe.getDefaultConf("legendAxisConf"),b.legendAxisConf)).legendPosition="bottom",a.legendPosition="bottom"):(g.drawOptions.refSideKey="canvasHeight",g.drawOptions.refOffsetKey="canvasTop",a=$e(Xe.getDefaultConf("axisTextItemConf"),b.axisTextItemConf),h.legendPosition="right",(d=$e(Xe.getDefaultConf("legendAxisConf"),b.legendAxisConf)).legendPosition="right",a.legendPosition="right"),Object.keys(this.components).length||(this.components.LegendCarpet=new class{constructor(e){this.conf=e,this._id="GL_CARPET",this.compositionsByCategory={},this.node=ze,this.group=ze,this._lSpace=ze,this.autoRecalculate=!1,this.groupName="fc-gradient-legend",this.moveInstructions={}}configure(e){this.conf=e}getName(){return"LegendCarpet"}getType(){return"legend"}addCompositions(e,t){this.compositionsByCategory[t]=e}removeCompositions(e){delete this.compositionsByCategory[e]}getBoundingBox(e){var t,o,r=this.conf,a=r.spreadFactor,n=e.refSide,i=e.alignment,l=e.refOffset,s=e.x,c=e.y;return"bottom"===this.conf.legendPosition?(t=r.width=n*a,o=e.maxOtherSide,i&&(s===ze||null===s)&&(s=(l+n)/2-t/2)):(o=r.height=n*a,t=e.maxOtherSide,i&&(c===ze||null===c)&&(c=(l+n)/2-o/2)),{width:t,height:o,x:s,y:c}}getPostCalcDecisionsH(e,t){var o,r=this.conf.padding,a=0;for(o in this.moveInstructions={},t)a+=t[o].height||0;e.height=a+2*r.v}getLogicalSpace(e,t){var o,r,a,n,i,l=this._lSpace,s=["CAPTION","LEGEND_BODY"],c=this.conf.padding,d=this.compositionsByCategory,h=0,g={},b=0;if(l&&!t)return l.isImpure=!0,l;(tt((l=this._lSpace=r=this.getBoundingBox(e)).x)||tt(l.y)||tt(l.height)||tt(l.width))&&(this.autoRecalculate=!0),(a=$e(r,{})).height-=2*c.v,a.width-=2*c.h,a.x+=c.h,a.y+=c.v;for(let p=0;p<s.length;p++)(o=d[s[p]])&&((i=$e(a,{})).y+=h,i.height=(h=a.height*o.conf.spreadFactor)+b,n=o.getLogicalSpace($e(i,{}),e,t),b=i.height-n.height,g[s[p]]=n,h=n.height);return this.getPostCalcDecisions(r,g),this._lSpace=r,r}setupDragging(){var e=this.group,t=0,o=0,r=0,a=0;e.css({cursor:"move"}),e.drag(function(n,i){e.attr({transform:"t"+(r+(t=n))+","+(a+(o=i))})},function(){r+=t,a+=o},s.nb)}draw(e){var t,o,r,a=this.conf,n=["CAPTION","LEGEND_BODY"],i=this.compositionsByCategory,l=e.animationManager,s=e.parentGroup;this.getLogicalSpace(e,this.autoRecalculate),r=this._lSpace,this.group=t=l.setAnimation({el:this.group||"group",attr:{name:this.groupName},component:Ye,container:s,label:"carpetGroup"}),this.node=l.setAnimation({el:this.node||"rect",attr:r,css:a.style,component:Ye,container:t,label:"rect"});for(let c=0;c<n.length;c++)(o=i[n[c]])&&o.draw(a.captionAlignment,r,{animationManager:l,colorRange:e.colorRange,numberFormatter:e.numberFormatter,parentLayer:t,smartLabel:e.smartLabel,moveInstructions:this.moveInstructions[void 0],gLegend:e.gLegend});return a.allowDrag&&this.setupDragging(),this.node}getPostCalcDecisions(e,t){return"bottom"===this.conf.legendPosition?this.getPostCalcDecisionsH(e,t):this.getPostCalcDecisionsV(e,t)}getPostCalcDecisionsV(e,t){var o,r,a,n=this.conf.padding,i=Number.NEGATIVE_INFINITY,l=this.moveInstructions;for(r in this.getPostCalcDecisionsH(e,t),t)i=i<(o=t[r].width)?o:i;for(r in e.width=i+2*n.h,t)(a=i-(o=t[r].width))&&(l[r]="t"+a/2+",0")}},this.components.LegendBody=new class{constructor(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this._id="GL_BODY",this.bound=ze,this.group=ze,this.compositionsByCategory={},this._lSpace=ze,this.SC_STACK=[Ue.AXIS_LABEL,Ue.LEGEND_AXIS,Ue.AXIS_VALUE],this.DARW_STACK=[Ue.AXIS_VALUE,Ue.LEGEND_AXIS,Ue.AXIS_LABEL]}configure(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this.compositionsByCategory={}}getName(){return"LegendBody"}getType(){return"legend"}addCompositions(e,t){this.compositionsByCategory[t]=e}getSpaceTaken(e){return"bottom"===this.conf.legendPosition?e.height:e.width}getLogicalSpace(e,t,o){var r,a,n,i,l,s,c,d=this._lSpace,h=this.conf.padding,g=this.compositionsByCategory,b=0;if(d&&!o)return d.isImpure=!0,d;for(d=this._lSpace={bound:{height:0,width:0},node:{logicArea:ze}},(i=$e(e,{})).height-=2*h.v,i.width-=2*h.h,i.x+=h.h,i.y+=h.v,l=this.getCompositionPlotAreaFor(i),t.colorRange=this.colorRange,s=0,c=this.SC_STACK.length;s<c;s++)(r=g[this.SC_STACK[s]])&&(a=l(n,r.conf.spreadFactor),n=r.getLogicalSpace($e(a,{}),t,o),b+=this.getSpaceTaken(n));return this.updateEffectivePlotArea(e,i,b),d.node.logicArea=i,d.bound=e,e}draw(){var e,t,o,r,a,n,i,l,s,c,d=this.childTextConf,h=this.conf.bound.style||{},g=this.compositionsByCategory;for(3<=arguments.length?(n=arguments[1],l=arguments[2]):2<=arguments.length&&(l=arguments[1]),t=l.parentLayer,e=l.animationManager,this.getLogicalSpace(n,l),i=this._lSpace,this.group=a=e.setAnimation({el:this.group||"group",attr:{name:"legend-body",transform:"t0,0"},css:d.style,container:t,component:Ye}),this.bound=o=e.setAnimation({el:this.bound||"rect",attr:i.bound,css:h,container:a,component:Ye}),l.colorRange=this.colorRange,l.parentLayer=a,s=0,c=this.DARW_STACK.length;s<c;s++)(r=g[this.DARW_STACK[s]])&&r.draw(l);return l.moveInstructions&&a.attr({transform:l.moveInstructions}),{bound:o,group:a}}getCompositionPlotAreaFor(e){var t,o="bottom"===this.conf.legendPosition;return t=$e(e,{}),function(r,a){return r=r||{},o?(t.y+=r.height||0,t.height=e.height*a):(t.x+=r.width||0,t.width=e.width*a),t}}updateEffectivePlotArea(e,t,o){var r=this.conf.padding;"bottom"===this.conf.legendPosition?(t.height=o,e.height=o+2*r.v):(t.width=o,e.width=o+2*r.h)}},this.components.LegendAxis=new class{constructor(e){this.conf=e,this._id="FL_AXIS",this.node=ze,this.group=ze,this.shadow=ze,this.markerLine=ze,this.compositionsByCategory={}}configure(e){this.conf=e}getName(){return"LegendAxis"}getType(){return"axis"}addCompositions(e,t){this.compositionsByCategory[t]=e}getLogicalSpace(){var e,t,o,r,a,n="bottom"===this.conf.legendPosition,i=arguments[0],l=this._lSpace,s=this.conf,c=s.padding,d=s.legendAxisHeight,h=this.compositionsByCategory,g=0;return l&&!arguments[2]?(l.isImpure=!0,l):(l=this._lSpace={bound:{height:0,width:0},node:{logicArea:ze}},(a=$e(i,{})).height-=2*c.v,a.width-=2*c.h,a.x+=c.h,a.y+=c.v,e=d/2+s.line.offset,t=d/2,(r=h[Ue.RANGE])&&(t+=g=Math.max(r.sliders.false.conf.outerCircle.rFactor*d/2-d/2,0)),n?(a.y+=g,a.height=o=t+e+g,i.height=o+2*c.v):(a.x+=g,a.width=o=t+e+g,i.width=o+2*c.v),l.node.logicArea=a,l.bound=i,i)}getDrawableAxisArea(e){var t=this.conf,o="bottom"===this.conf.legendPosition;return{x:e.x,y:e.y,width:o?e.width:t.legendAxisHeight,height:o?t.legendAxisHeight:e.height,r:t.legendAxisHeight/2}}preDrawingRangeParamV(e){return{x:e.x+e.width/2,calculationBase:e.width,rangeStart:e.y,rangeEnd:e.y+e.height,prop:"x"}}preDrawingRangeParamH(e){return{y:e.y+e.height/2,calculationBase:e.height,rangeStart:e.x,rangeEnd:e.x+e.width,prop:"y"}}preDrawingRangeParam(e){return"bottom"===this.conf.legendPosition?this.preDrawingRangeParamH(e):this.preDrawingRangeParamV(e)}getScaleMarkerPathStrH(e,t){var o,r,a,n,i=$e(e,{}),l=this.conf.line,s="";for(i.x+=i.r,i.width-=2*i.r,n=i.y+i.height,o=0,r=t.length;o<r;o++)s+="M"+(a=i.x+t[o]*i.width/100)+","+(n-l.grooveLength)+"L"+a+","+(n+l.offset);return s+"M"+i.x+","+(n+l.offset)+"L"+(i.x+i.width)+","+(n+l.offset)}getColorGradientH(e){return{axis:e.getBoxFill(),shadow:Object(s.pb)({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}draw(){var e,t,o,r,a,n,i,l,s,c,d,h,g,b,p=this.conf,u=p.line,f=(p.bound||{}).style||{},m=this.compositionsByCategory;for(o in 2<=arguments.length?(t=arguments[0],h=arguments[1]):1<=arguments.length&&(h=arguments[0]),g=h.animationManager,e=h.parentLayer,a=(r=h.colorRange).getCumulativeValueRatio(),this.getLogicalSpace(t,h),d=this._lSpace,this.group=i=g.setAnimation({el:this.group||"group",attr:{name:"legend-axis"},container:e,component:Ye}),this.bound=g.setAnimation({el:this.bound||"rect",attr:d.bound,css:f,component:Ye,container:i}),c=this.getDrawableAxisArea(d.node.logicArea),s=this.getColorGradient(r),p.style.fill=s.axis,p.shadow.style.fill=s.shadow,this.node=g.setAnimation({el:this.node||"rect",attr:c,css:p.style,container:i,component:Ye}),this.shadow=g.setAnimation({el:this.shadow||"rect",attr:c,css:p.shadow.style,container:i,component:Ye}),b=this.getScaleMarkerPathStr(c,a),this.path=g.setAnimation({el:this.path||"path",attr:{path:b},css:u.style,container:i,component:Ye}),m)n=m[o],o===Ue.RANGE&&(h[(l=this.preDrawingRangeParam(c)).prop]=l[l.prop],h.key=l.prop,h.rCalcBase=l.calculationBase,h.parentLayer=i,n.draw(l.rangeStart,l.rangeEnd,h))}getScaleMarkerPathStr(e,t){return"bottom"===this.conf.legendPosition?this.getScaleMarkerPathStrH(e,t):this.getScaleMarkerPathStrV(e,t)}getColorGradient(e){return"bottom"===this.conf.legendPosition?this.getColorGradientH(e):this.getColorGradientV(e)}getScaleMarkerPathStrV(e,t){var o,r,a,n,i=$e(e,{}),l=this.conf.line,s="";for(i.y+=i.r,i.height-=2*i.r,a=i.x+i.width,o=0,r=t.length;o<r;o++)s+="M"+(a-l.grooveLength)+","+(n=i.y+t[o]*i.height/100)+"L"+(a+l.offset)+","+n;return s+"M"+(a+l.offset)+","+i.y+"L"+(a+l.offset)+","+(i.y+i.height)}getColorGradientV(e){return{axis:e.getBoxFill(!0),shadow:Object(s.pb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}},this.components.LegendValues=new class extends at{constructor(){super(arguments[0]),this._id="GL_VALUES",this.node=[]}configure(e){this.conf=e}getName(){return"LegendValues"}getType(){return"legend"}getLogicalSpace(e,t,o){var r,a,n,i,l,s,c,d,h,g,b,p,u,f,m,v,y,C,k,O,x,w,F,j,L=Math.min,A=Math.max,E="bottom"===this.conf.legendPosition,S=this._lSpace,_=this.conf,I=_.padding,T=t.gLegend.getFromEnv("chartConfig"),P=[],R=[];if(S&&!o)return S.isImpure=!0,S;for(a=t.smartLabel,n=(r=t.colorRange).colorRange,c=r.getCumulativeValueRatio(),j=(S=this._lSpace={bound:{height:0,width:0},node:{logicArea:ze,smartTexts:[]}}).node.smartTexts,(k=$e(e,{})).height-=2*I.v,k.width-=2*I.h,k.x+=I.h,k.y+=I.v,a.useEllipsesOnOverflow(T.useEllipsesWhenOverflow),F=$e(_.style,{}),et(this._metaStyle=F),a.setStyle(F),w=a.getSmartText("W"),s=n.length,E?(g=d=(c[s-1]-c[0])/2*k.width/100,(i=a.getSmartText("string"!=typeof(x=n[0].displayValue)&&x!==ze&&x.toString()||x,g,k.height)).x=c[0]*k.width/100,b=i.x+i.width,P.push(i.height)):(g=d=(c[s-1]-c[0])/2*k.height/100,(i=a.getSmartText(n[0].displayValue,k.width,g)).y=c[0]*k.height/100,f=i.y+i.width,R.push(i.width)),j[0]=i,E?((i=a.getSmartText(n[s-1].displayValue,g,k.height)).x=c[s-1]*k.width/100,u=i.x-i.width,P.push(i.height),p=b):((i=a.getSmartText(n[s-1].displayValue,k.width,g)).y=c[s-1]*k.height/100,v=i.y-i.height,R.push(i.width),m=f),j[s-1]=i,l=1;l<s-1;l++)i=ze,O=n[l].displayValue,E?(d=L((h=c[l]*k.width/100)-p,(l+1===s-1?u:c[l+1]*k.width/100)-h))>1.5*w.width&&((i=a.getSmartText(O,2*d,k.height)).x=c[l]*k.width/100,p=d,P.push(i.height)):(d=L((h=c[l]*k.height/100)-m,(l+1===s-1?v:c[l+1]*k.height/100)-h))>2*w.height&&((i=a.getSmartText(O,k.width,2*d)).y=c[l]*k.height/100,m=d,R.push(i.width)),j[l]=i;return E?(y=A.apply(Math,P),k.height=y,e.height=y+2*I.v):(C=A.apply(Math,R),k.width=C,e.width=C+2*I.h),S.node.logicArea=k,S.bound=e,e}draw(){var e,t,o,r,a,n,i,l,s,c,d,h,g,b=this.conf,p="bottom"===b.legendPosition,u=b.bound&&b.bound.style||{stroke:"none"},f={};2<=arguments.length&&arguments[1]?(r=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),g=i.animationManager,e=i.parentLayer,l=i.colorRange.getCumulativeValueRatio(),this.getLogicalSpace(r,i),n=(a=this._lSpace).node.logicArea,d=a.node.smartTexts,this.group=o=g.setAnimation({el:this.group||"group",attr:{name:"legend-values"},container:e,component:Ye}),this.bound=t=g.setAnimation({el:this.bound||"rect",attr:a.bound,css:u,container:o,component:Ye});for(let m=0;m<this.node.length;m++)this.node[m].remove();for(this.node=[],s=0,c=l.length;s<c;s++)(h=d[s])&&(p?(f.y=n.y+h.height/2,f.x=s===c-1?n.x+h.x-h.width/2:s?n.x+h.x:n.x+h.x+h.width/2):(f.x=n.x+h.width/2,f.y=s===c-1?n.y+h.y-h.height/2:s?n.y+h.y:n.y+h.y+h.height/2),this.node.push(g.setAnimation({el:"text",attr:{text:h.text,x:f.x,y:f.y,lineHeight:this._metaStyle.lineHeight,fill:b.style.fill},container:o,component:Ye})));return{group:o,bound:t}}},b.showLegendLabels&&(this.components.LegendLabels=new at)),t=this.components.LegendAxis,l=this.components.LegendValues,e=this.components.LegendCarpet,n=this.components.LegendBody,b.showLegendLabels&&(i=this.components.LegendLabels),this.components.LegendCarpet.configure(r),this.components.LegendValues.configure(a),this.components.LegendAxis.configure(d),this.components.LegendBody.configure(g.drawOptions.colorRange,h,a),b.showLegendLabels&&i.configure(a),b.caption?(c=$e(Xe.getDefaultConf("legendCaptionConf"),b.legendCaptionConf),this.componentCaption&&Object.keys(this.componentCaption).length?this.componentCaption.configure(b.caption,c):(this.componentCaption=new class{constructor(e,t){this.rawText=e,this.conf=t,this._id="GL_CAPTION",this.node=ze,this.bound=ze,this._lSpace=ze,this.LegendCaption={},this.LegendCaption.LEFT={x:function(e,t){return t.x+e.width/2+2}},this.LegendCaption.RIGHT={x:function(e,t){return t.x+t.width-e.width/2-2}},this.LegendCaption.CENTER={x:function(){let e=arguments[1];return e.x+e.width/2}}}configure(e,t){this.rawText=e,this.conf=t}getName(){return"LegendCaption"}getType(){return"caption"}getLogicalSpace(e,t,o){var r,a,n,i,l=this.conf.padding,s=this._lSpace,c=this.rawText,d=t.gLegend.getFromEnv("chartConfig");return s&&!o?(s.isImpure=!0,s):(s=this._lSpace={bound:{height:0,width:0},node:{logicArea:ze,smartText:ze}},r=t.smartLabel,c?((a=$e(e,{})).height-=2*l.v,a.width-=2*l.h,a.x+=l.h,a.y+=l.v,r.useEllipsesOnOverflow(d.useEllipsesWhenOverflow),et(i=$e(this.conf.style,{})),r.setStyle(this._metaStyle=i),n=r.getSmartText(c,a.width,a.height),a.height=n.height,a.width=n.width,e.height=n.height+2*l.v,e.width=n.width+2*l.h,s.node.smartText=n,s.node.logicArea=a,s.bound=e,e):s.bound)}draw(){var e,t,o,r,a,n,i,l,s,c=this.conf,d=c.bound||{};return 3<=arguments.length?(a=arguments[0],n=arguments[1],i=arguments[2]):2<=arguments.length&&(a=arguments[0],i=arguments[1]),this.group=e=(s=i.animationManager).setAnimation({el:this.group||"group",attr:{name:"legend-caption"},css:c.style,component:Ye,container:i.parentLayer}),this.getLogicalSpace(n,i),l=(o=this._lSpace).node,this.bound=t=s.setAnimation({el:this.bound||"rect",attr:o.bound,css:d.style,container:e,component:Ye}),r="string"==typeof a?this.LegendCaption[a.toUpperCase()].x(l.smartText,n||l.logicArea):a,this.node=s.setAnimation({el:this.node||"text",attr:{text:l.smartText.text,x:r,y:l.logicArea.y+l.smartText.height/2,lineHeight:this._metaStyle.lineHeight,fill:c.style.fill},container:e,component:Ye}),{group:e,bound:t,node:this.node}}dispose(){this.group.remove(),this.bound.remove(),this.node.remove()}}).configure(b.caption,c),e.addCompositions(this.componentCaption,Ue.CAPTION)):(e.removeCompositions(Ue.CAPTION),this.componentCaption&&this.componentCaption.dispose(),delete this.componentCaption),o&&t.addCompositions(o,Ue.RANGE),i&&n.addCompositions(i,Ue.AXIS_LABEL),n.addCompositions(t,Ue.LEGEND_AXIS),n.addCompositions(l,Ue.AXIS_VALUE),e.addCompositions(n,Ue.LEGEND_BODY),g.elem.gl=new class{constructor(e){this.carpet=e}draw(e){return this.carpet.draw(e)}getLogicalSpace(e,t){return this.carpet.getLogicalSpace(e,t)}dispose(){this.carpet&&this.carpet.group&&this.carpet.group.remove()}}(e)}getValueRange(){var e,t=this.elem&&this.elem.sGroup,o=t.sliders,r=t.extremes;return e=r[1]-r[0]+o.true.currPos,[{min:t.getValueFormPixel(o.false.currPos),max:t.getValueFormPixel(e)}]}_dispose(){var e=this;e.elem&&e.elem.gl&&e.elem.gl.dispose(),e.elem={},super._dispose()}getCalculatedLogicalSpace(){return this._logicalArea}setCalculatedLogicalSpace(e){this._logicalArea=e}getLogicalSpace(e){var t,o,r=this,a=r.conf,n={height:0,width:0},i=r.drawOptions,l=r.getFromEnv("chartConfig");return r._recalculateLogicalSpace?r._dontPlot?n:(r._recalculateLogicalSpace=!1,r.postConfigureInit(),a.showLegend?(o=i.refOffsetKey,r.drawOptions.refSide=l[i.refSideKey],r.drawOptions.refOffset=l[o],r.drawOptions.maxOtherSide=e||r.drawOptions.maxOtherSide,r.elem.gl&&(t=r.elem.gl.getLogicalSpace(r.drawOptions,!0),r.elem.gl&&r.setCalculatedLogicalSpace(t)),r.getCalculatedLogicalSpace()):n):(o=i.refOffsetKey,r.drawOptions.refSide=l[i.refSideKey],r.drawOptions.refOffset=l[o],r.drawOptions.maxOtherSide=e||r.drawOptions.maxOtherSide,t=r.elem.gl.getLogicalSpace(r.drawOptions,!0),r.setCalculatedLogicalSpace(t),r.getCalculatedLogicalSpace()||n)}resetLegend(){var e;(e=this.elem&&this.elem.sGroup)&&e.reset()}allocatePosition(){var e,t,o,r,a,n,i=this.getFromEnv("chart"),l=i.config,s=this.conf||{},c=s.legendPosition,d=l.canvasLeft,h=l.canvasTop,g=l.canvasWidth,b=l.canvasHeight,p=l.marginBottom,u=l.marginRight;i.config.gLegendEnabled&&(e=this.getCalculatedLogicalSpace(),o=s.width=e.width,r=s.height=e.height,"bottom"===c?(a=d+(0>(t=g-o)?0:t/2),n=l.height-e.height-p-(l.actionBarHeight||0)):(n=h+(0>(t=b-r)?0:t/2),a=l.width-e.width-u),s.xPos=a,s.yPos=n)}draw(){var e=this.getFromEnv("chart"),t=e.getFromEnv("dataSource").colorrange,o=this.conf||{};!e.config.gLegendEnabled||t&&e.hasGradientLegend&&this.drawLegendComponent(o.xPos,o.yPos,{parentGroup:e.getContainer("parentgroup"),animationManager:e.getFromEnv("animationManager")})}drawLegendComponent(e,t,o){var r,a=this,n=a.conf;return a._dontPlot?void 0:n.showLegend?(a.drawOptions.animationManager=o.animationManager,a.drawOptions.parentGroup=o.parentGroup,a.drawOptions.x=e,a.drawOptions.y=t,a.drawOptions.maxOtherSide=a.drawOptions.maxOtherSide||o.maxOtherSide,r=a.elem.gl.draw(a.drawOptions).getBBox(),n.xPos=r.x,n.yPos=r.y,n.height=r.height,n.width=r.width,void(a.enabled=!0)):void(a.enabled=!1)}},"gLegend",1),(d=e.getChildren("gLegend")[0]).configure(),e.addToEnv("gLegend",d)):"icon"===t?(e.deleteFromEnv("gLegend"),d&&d.remove(),Object(s.N)(e,it.a,"legend",1,{showLegend:!0}),(l=e.getChildren("legend")[0]).configure(),e.addToEnv("legend",l)):"none"===t&&(e.deleteFromEnv("gLegend"),e.deleteFromEnv("legend"),d&&d.remove(),l&&l.remove())}(e)};let st,ct=Object(h.c)({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},n),dt="0,100",ht={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},gt={getMapName:function(){return this.jsVars.instanceAPI.getName().toLowerCase()},getEntityList:function(){let e,t,o,r,a,n,i,l=this.jsVars.instanceAPI.getDatasets()||[],s=l.length,c=[];for(e=0;e<s;e++)if("entities"===(i=(o=l[e]||[]).getName())){t=o;break}for(e in s=(r=t.components.data).length,r)r.hasOwnProperty(e)&&c.push({id:(n=(a=r[e]||{}).config||{}).id,originalId:n.originalId||n.id,label:n.label,shortlabel:n.shortLabel,value:n.value,formattedValue:n.formattedValue,toolText:n.toolText});return c},getMapAttribute:function(){return Object(l.f)(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),this.getChartAttribute.apply(this,arguments)},exportMap:function(){let e=this;return Object(l.f)(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),e.exportChart&&e.exportChart.apply(e,arguments)},addMarker:function(e){let t,o,r,a,n=this.jsVars.instanceAPI.getDatasets()||[],i=n.length;for(t=0;t<i;t++)if("markers"===(a=(o=n[t]||[]).getName())){r=o;break}r&&!r.addMarkerItem(e)&&Object(l.f)(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(e,t){let o,r,a,n,i=this.jsVars.instanceAPI.getDatasets()||[],l=i.length;for(o=0;o<l;o++)if("markers"===(n=(r=i[o]||[]).getName())){a=r;break}a&&e&&(e=(e+ut).toLowerCase(),a.updateMarkerItem(e,t))},removeMarker:function(e){let t,o,r,a,n=this.jsVars.instanceAPI.getDatasets()||[],i=n.length;for(t=0;t<i;t++)if("markers"===(a=(o=n[t]||[]).getName())){r=o;break}e&&(e=(e+ut).toLowerCase(),r._removeMarkerItem(e))}},bt="none",pt=", ",ut="",ft="bottom",mt="circle",vt=window.Math,yt=vt.min,Ct=vt.max,kt=function(e,t){let o=Object(s.Ha)(t.getFromEnv("chart-container"),e),r=o.chartX,a=o.chartY,n=t.config,i=n.canvasLeft,l=n.canvasTop,c=n.canvasLeft+n.canvasWidth,d=n.canvasHeight+n.canvasTop;return o.insideCanvas=!1,o.originalEvent=e,r>i&&r<c&&a>l&&a<d&&(o.insideCanvas=!0),o};class Ot extends a.a{constructor(e,t){for(var o in super(),this.subpalette="",this.key="",this.index=t,e)this.subpalette=ct[e[o]],this[o]=this.subpalette instanceof Array?this.subpalette[t]:this.subpalette,this.key=o}}class xt extends r.a{constructor(){super(),this.friendlyName="Map",this.revision=1,this.hasCanvas=!0,this.standaloneInit=!1,this.defaultDatasetType="maps",this.defaultSeriesType="geo",this.fireGroupEvent=!0,this.legendposition="right",this.hasGradientLegend=!0,this.isMap=!0,this.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:[dt,dt,dt,dt,dt],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]},this.colorPaletteMap=ht,this.eiMethods=gt,this.registerFactory("legend",lt,["canvas"]),this.registerFactory("axis",()=>{},["canvas"]),this.registerFactory("colormanager-decider",We,["legend"]),this.registerFactory("dataset",Re,["colormanager-decider"]),this.registerFactory("canvas",Me.a)}_checkInvalidSpecificData(){return this.config.invalid=!1,!1}__setDefaultConfig(){var e=this.config;e.baseWidth||(e.baseWidth=400),e.baseHeight||(e.baseHeight=300),e.baseScaleFactor||(e.baseScaleFactor=1)}static getName(){return"maps"}static getType(){return"chartAPI"}getName(){return this.config.name||"GEO"}getType(){return"chartAPI"}configureAttributes(e){let t,o=this,r=o.getChildren("colorPalette")&&o.getChildren("colorPalette")[0];t=e.chart=e.chart||e.graph||e.map||{},o.jsonData=e,Object(s.N)(o,d.a,"mapAnnotations"),r||(r=new Ot(this.colorPaletteMap,(0<t.palette&&6>t.palette?t.palette:Object(s.db)(o.paletteIndex,1))-1),o.attachChild(r,"colorPalette")),o.config.skipCanvasDrawing=!0,super.configureAttributes(e),o._parseBackgroundCosmetics()}parseChartAttr(e){let t,o,r,a,n,i=this,l=i.jsonData,c=l.chart||l.map,d=l.markers,h=new Ot(this.colorPaletteMap,(0<c.palette&&6>c.palette?c.palette:Object(s.db)(i.paletteIndex,1))-1),g=Object(s.bb)(c.entitybordercolor,c.bordercolor,h.plotbordercolor),b=Object(s.bb)(c.entityfillcolor,c.fillcolor,h.plotfillcolor),p=Object(s.bb)(c.entityfillalpha,c.fillalpha,h.plotfillalpha),u=Object(s.bb)(c.entityfillratio,c.fillratio,h.plotfillratio),f=Object(s.bb)(c.entityfillangle,c.fillangle,h.plotfillangle),m=Object(s.bb)(c.nullentityfillcolor,c.nullentitycolor,b),v=Object(s.db)(c.usevaluesformarkers,l.markers&&l.markers.items&&l.markers.items.length,!(l.markers&&l.markers.application&&l.markers.application.length&&l.markers.definition&&l.markers.definition.length));super.parseChartAttr(e),(t=i.config).origMarginTop=Object(s.db)(c.charttopmargin,c.maptopmargin,11),t.origMarginLeft=Object(s.db)(c.chartleftmargin,c.mapleftmargin,11),t.origMarginBottom=Object(s.db)(c.chartbottommargin,c.mapbottommargin,11),t.origMarginRight=Object(s.db)(c.chartrightmargin,c.maprightmargin,11),t.labelsOnTop=Object(s.db)(c.entitylabelsontop,1),o=(n=t.style).inCancolor,t.entityOpts={baseScaleFactor:t.baseScaleFactor,dataLabels:{style:{fontFamily:r=n.inCanfontFamily,fontSize:a=n.inCanfontSize,lineHeight:n.inCanLineHeight,color:n.inCancolor}},fillColor:b,fillAlpha:p,fillRatio:u,fillAngle:f,borderColor:g,borderAlpha:Object(s.bb)(c.entityborderalpha,c.borderalpha,i.borderAlpha,"100"),borderThickness:Object(s.db)(c.showentityborder,c.showborder,1)?Object(s.db)(c.entityborderthickness,c.borderthickness,1):0,scaleBorder:Object(s.db)(c.scaleentityborder,c.scaleborder,0),hoverFillColor:Object(s.bb)(c.entityfillhovercolor,c.hoverfillcolor,c.hovercolor,h.plothoverfillcolor),hoverFillAlpha:Object(s.bb)(c.entityfillhoveralpha,c.hoverfillalpha,c.hoveralpha,h.plothoverfillalpha),hoverFillRatio:Object(s.bb)(c.entityfillhoverratio,c.hoverfillratio,c.hoverratio,h.plothoverfillratio),hoverFillAngle:Object(s.bb)(c.entityfillhoverangle,c.hoverfillangle,c.hoverangle,h.plothoverfillangle),hoverBorderThickness:Object(s.bb)(c.entityborderhoverthickness,c.hoverborderthickness),hoverBorderColor:Object(s.bb)(c.entityborderhovercolor,g,h.plotbordercolor),hoverBorderAlpha:Object(s.bb)(c.entityborderhoveralpha,h.plotborderalpha),nullEntityColor:m,nullEntityAlpha:Object(s.bb)(c.nullentityfillalpha,c.nullentityalpha,p),nullEntityRatio:Object(s.bb)(c.nullentityfillratio,c.nullentityratio,u),nullEntityAngle:Object(s.bb)(c.nullentityfillangle,c.nullentityangle,f),connectorColor:Object(s.bb)(c.labelconnectorcolor,c.connectorcolor,o),connectorAlpha:Object(s.bb)(c.labelconnectoralpha,c.connectoralpha,"100"),connectorThickness:Object(s.db)(c.labelconnectorthickness,c.borderthickness,1),showHoverEffect:Object(s.db)(c.showentityhovereffect,c.usehovercolor,c.showhovereffect,1),hoverOnNull:Object(s.db)(c.hoveronnull,c.entityhoveronnull,1),labelPadding:Object(s.db)(c.labelpadding,5),showLabels:Object(s.db)(c.showlabels,1),labelsOnTop:Object(s.db)(c.entitylabelsontop,1),includeNameInLabels:Object(s.db)(c.includenameinlabels,1),includeValueInLabels:Object(s.db)(c.includevalueinlabels,0),useSNameInTooltip:Object(s.db)(c.usesnameintooltip,0),useShortName:Object(s.db)(c.usesnameinlabels,1),labelSepChar:Object(s.bb)(c.labelsepchar,pt),showTooltip:Object(s.db)(c.showentitytooltip,c.showtooltip,1),tooltipSepChar:Object(s.bb)(c.tooltipsepchar,", "),tooltext:c.entitytooltext,hideNullEntities:Object(s.db)(c.hidenullentities,0),showHiddenEntityBorder:Object(s.db)(c.showhiddenentityborder,1),showNullEntityBorder:Object(s.db)(c.shownullentityborder,1),hiddenEntityColor:Object(s.bb)(c.hiddenentitycolor,c.hiddenentityfillcolor,c.hiddenentityalpha||c.hiddenentityfillalpha?m:"ffffff"),hiddenEntityAlpha:Object(s.bb)(c.hiddenentityalpha,c.hiddenentityfillalpha,.001),shadow:Object(s.db)(c.showshadow,i.defaultPlotShadow,h.shadow)},t.markerOpts={dataLabels:{style:{fontFamily:Object(s.bb)(c.markerfont,r),fontSize:Object(s.db)(c.markerfontsize,parseInt(a,10)),fontColor:Object(s.bb)(c.markerfontcolor,o)}},showTooltip:Object(s.db)(c.showmarkertooltip,c.showtooltip,1),showLabels:Object(s.db)(c.showmarkerlabels,c.showlabels,1),showHoverEffect:Object(s.db)(c.showmarkerhovereffect,1),labelPadding:Object(s.bb)(c.markerlabelpadding,"5"),labelWrapWidth:Object(s.db)(c.markerlabelwrapwidth,0),labelWrapHeight:Object(s.db)(c.markerlabelwrapheight,0),fillColor:Object(s.bb)(c.markerfillcolor,c.markerbgcolor,h.markerfillcolor),fillAlpha:Object(s.bb)(c.markerfillalpha,h.markerfillalpha),fillAngle:Object(s.bb)(c.markerfillangle,h.markerfillangle),fillRatio:Object(s.bb)(c.markerfillratio,h.markerfillratio),fillPattern:Object(s.bb)(c.markerfillpattern,h.markerbgpattern),hoverFillColor:c.markerfillhovercolor,hoverFillAlpha:c.markerfillhoveralpha,hoverFillRatio:c.markerfillhoverratio,hoverFillAngle:c.markerfillhoverangle,borderThickness:Object(s.bb)(c.markerborderthickness,1),borderColor:Object(s.bb)(c.markerbordercolor,h.markerbordercolor),borderAlpha:Object(s.db)(c.markerborderalpha,h.markerborderalpha),hoverBorderThickness:c.markerborderhoverthickness,hoverBorderColor:c.markerborderhovercolor,hoverBorderAlpha:c.markerborderhoveralpha,radius:Object(s.db)(c.markerradius&&Object(s.rb)(c.markerradius),7),shapeId:Object(s.bb)(c.defaultmarkershape,mt),labelSepChar:Object(s.bb)(c.labelsepchar,pt),tooltipSepChar:Object(s.bb)(c.tooltipsepchar,", "),autoScale:Object(s.db)(c.autoscalemarkers,0),tooltext:Object(s.bb)(d&&d.tooltext,c.markertooltext),dataEnabled:v,valueToRadius:Object(s.db)(c.markerradiusfromvalue,1),valueMarkerAlpha:Object(s.bb)(c.valuemarkeralpha,"75"),hideNull:Object(s.db)(c.hidenullmarkers,0),nullRadius:Object(s.db)(c.nullmarkerradius,c.markerradius,7),adjustViewPort:Object(s.db)(c.adjustviewportformarkers,0),startAngle:Object(s.db)(c.markerstartangle,90),maxRadius:Object(s.db)(c.maxmarkerradius,0),minRadius:Object(s.db)(c.minmarkerradius,0),applyAll:Object(s.db)(c.applyallmarkers,0),shadow:Object(s.db)(c.showmarkershadow,c.showshadow,0)},t.connectorOpts={showHoverEffect:Object(s.db)(c.showconnectorhovereffect,1),thickness:Object(s.db)(c.connectorthickness,c.markerconnthickness,"2"),color:Object(s.bb)(c.connectorcolor,c.markerconncolor,h.markerbordercolor),alpha:Object(s.bb)(c.connectoralpha,c.markerconnalpha,"100"),hoverThickness:Object(s.db)(c.connectorhoverthickness,c.connectorthickness,c.markerconnthickness,"2"),hoverColor:Object(s.bb)(c.connectorhovercolor,c.connectorcolor,c.markerconncolor,h.markerbordercolor),hoverAlpha:Object(s.bb)(c.connectorhoveralpha,c.connectoralpha,c.markerconnalpha,"100"),dashed:Object(s.db)(c.connectordashed,c.markerconndashed,0),dashLen:Object(s.db)(c.connectordashlen,c.markerconndashlen,3),dashGap:Object(s.db)(c.connectordashgap,c.markerconndashgap,2),font:Object(s.bb)(c.connectorfont,c.markerconnfont,r),fontColor:Object(s.bb)(c.connectorfontcolor,c.markerconnfontcolor,o),fontSize:Object(s.db)(c.connectorfontsize,c.markerconnfontsize,parseInt(a,10)),showLabels:Object(s.db)(c.showconnectorlabels,c.showmarkerlabels,c.showlabels,1),labelBgColor:Object(s.bb)(c.connectorlabelbgcolor,c.markerconnlabelbgcolor,h.plotfillcolor),labelBorderColor:Object(s.bb)(c.connectorlabelbordercolor,c.markerconnlabelbordercolor,h.markerbordercolor),shadow:Object(s.db)(c.showconnectorshadow,c.showmarkershadow,c.showshadow,0),showTooltip:Object(s.db)(c.showconnectortooltip,c.showmarkertooltip,c.showtooltip,1),tooltext:Object(s.bb)(d&&d.connectortooltext,c.connectortooltext),hideOpen:Object(s.db)(c.hideopenconnectors,1)},t.adjustViewPortForMarkers=Object(s.db)(c.adjustviewportformarkers,v)}_attachMouseEvents(){let e=this,t=e.getFromEnv("eventListeners"),o=e.getFromEnv("chart-container");i.a.unlisten(o,s.Na?"touchstart":"mousemove",xt.searchMouseMove),t.push(i.a.listen(o,"touchstart mousemove",xt.searchMouseMove,e))}static searchMouseMove(e){let t,o=e.data,r=o.config;!o.getFromEnv("chart-container")||(t=kt(e,o))&&t.insideCanvas&&(r.lastMouseEvent=e,o._searchNearestNeighbour({x:t.chartX,y:t.chartY}))}_searchNearestNeighbour(e){let t,o=this,r=o.getDatasets()[1];if(r){if(!r.components.kDTree)return;(t=r.getElement(e))?o.config.lastHoveredPoint!==t&&r.highlightPoint(t):r.highlightPoint(!1)}}_createLayers(){super._createLayers(),this._attachMouseEvents()}_parseBackgroundCosmetics(){let e,t=this,o=t.getChildren("background")[0].config,r=t.getChildren("colorPalette")[0],a=t.getFromEnv("chart-attrib");e=o.showBorder=Object(s.db)(a.showcanvasborder,1),o.borderWidth=e?Object(s.db)(a.canvasborderthickness,1):0,o.borderRadius=o.borderRadius=Object(s.db)(a.canvasborderradius,0),o.borderDashStyle=o.borderDashStyle=Object(s.db)(a.borderdashed,0)?Object(s.Ba)(Object(s.db)(a.borderdashlen,4),Object(s.db)(a.borderdashgap,2)):bt,o.borderAlpha=Object(s.bb)(a.canvasborderalpha,r.borderAlpha),o.borderColor=o.borderColor=Object(c.c)(Object(s.bb)(a.canvasbordercolor,r&&r.borderColor),o.borderAlpha)}_getBackgroundCosmetics(){let e=this,t=e.getFromEnv("chart-attrib")||e.jsonData.map,o=e.getChildren("colorPalette")[0];return{FCcolor:{color:Object(s.bb)(t.bgcolor,t.canvasbgcolor,o.bgcolor),alpha:Object(s.bb)(t.bgalpha,t.canvasbgalpha,o.bgalpha),angle:Object(s.bb)(t.bgangle,t.canvasbgangle,o.bgangle),ratio:Object(s.bb)(t.bgratio,t.canvasbgratio,o.bgratio)}}}_parseCanvasCosmetics(){super._parseCanvasCosmetics();let e=this,t=e.config,o=e.getFromEnv("chart-attrib")||e.jsonData.map,r=e.getChildren("canvas")[0].config;t.origMarginTop=Object(s.db)(o.maptopmargin,11),t.origMarginLeft=Object(s.db)(o.mapleftmargin,11),t.origMarginBottom=Object(s.db)(o.mapbottommargin,11),t.origMarginRight=Object(s.db)(o.maprightmargin,11),t.origCanvasLeftMargin=Object(s.db)(o.canvasleftmargin,0),t.origCanvasRightMargin=Object(s.db)(o.canvasrightmargin,0),t.origCanvasTopMargin=Object(s.db)(o.canvastopmargin,0),t.origCanvasBottomMargin=Object(s.db)(o.canvasbottommargin,0),r.canvasBorderRadius=Object(s.db)(o.canvasborderradius,0),r.origCanvasTopPad=Object(s.db)(o.canvastoppadding,0),r.origCanvasBottomPad=Object(s.db)(o.canvasbottompadding,0),r.origCanvasLeftPad=Object(s.db)(o.canvasleftpadding,0),r.origCanvasRightPad=Object(s.db)(o.canvasrightpadding,0)}preliminaryScaling(){let e,t,o,r=this.jsonData,a=r.markers&&r.markers.items||[],n=a&&a.length||0,i=1/0,l=1/0,s=-1/0,c=-1/0;for(;n--;)t=+(o=a[n]).y,i=yt(i,e=+o.x),l=yt(l,t),s=Ct(s,e),c=Ct(c,t);return{x:i,y:l,x1:s,y1:c}}getScalingParameters(e,t,o,r){let a,n,i=e/t,l=o/(e*this.config.baseScaleFactor),s=r/(t*this.config.baseScaleFactor),c=0,d=0;return l>s?(c+=(o-r*i)/2,n=200/(t*(a=s))):(d+=(r-o/i)/2,n=200/(e*(a=l))),{scaleFactor:a,strokeWidth:n,translateX:c,translateY:d}}calculateMarkerBounds(e,t,o){let r,a,n,i,l,s,c,d,h,g,b,p,u,f,m=this,v=m.config,y=v.markerOpts,C=m.getDatasets(),k=m.getDataLimits(),O=k.dataMin,x=k.dataMax,w=y.hideNull,F=y.nullRadius,j=y.valueToRadius,L=1/0,A=1/0,E=-1/0,S=-1/0;for(s=0,h=C.length;s<h;s++)"markers"===(c=(d=C[s]).getName())&&(r=d);if(r)for(s in r.calculateMarkerRadiusLimits(),n=(a=r.config||{}).minRadius,i=a.maxRadius,l=r.components&&r.components.markerObjs||{})u=(v=(f=l[s]).config).definition||{},null!==v.cleanValue?(j&&u.radius===st&&(v.radius=n+(i-n)*(v.cleanValue-O)/(x-O)),b=(+u.y+o)*e,L=yt(L,(g=(+u.x+t)*e)-(p=+v.radius)),A=yt(A,b-p),E=Ct(E,g+p),S=Ct(S,b+p)):w?v.__hideMarker=!0:null===v.radius&&(v.radius=F);return{x:L,y:A,x1:E,y1:S}}_spaceManager(){let e,t,o,r,a,n,i,l,c,d=this,h=d.config,g=d.getChildren("legend")&&d.getChildren("legend")[0],b=g&&g.config.legendPos,p=d.getFromEnv("chart-attrib"),u=h.origMarginLeft,f=h.origMarginTop,m=d.config.baseWidth,v=d.config.baseHeight,y={},C=0,k=0,O=h.markerOpts,x=h.borderWidth=h.showBorder?Object(s.db)(p.borderthickness,1):0;d._allocateSpace({top:x,bottom:x,left:x,right:x}),d._allocateSpace(d._manageActionBarSpace&&d._manageActionBarSpace(.225*h.availableHeight)||{}),h.showLegend&&d._manageLegendSpace(l="right"===b?.3*h.canvasWidth:.3*h.canvasHeight),c=d._manageChartMenuBar(e=b===ft?.225*h.canvasHeight:.225*h.canvasWidth),o=h.canvasWidth,r=h.canvasHeight,O.dataEnabled?(h.adjustViewPortForMarkers?((y=d.preliminaryScaling()).x1>m&&(m=y.x1),0>y.x&&(m+=-y.x,C=-y.x),y.y1>v&&(v=y.y1),0>y.y&&(v+=-y.y,k=-y.y),t=d.getScalingParameters(m,v,o,r),n=r,i=o,0>(y=d.calculateMarkerBounds(t.scaleFactor*d.config.baseScaleFactor,C,k)).x&&(u+=-y.x,o+=y.x),0>y.y&&(f+=-y.y,r+=y.y),y.x1>i&&(o-=y.x1-i),y.y1>n&&(r-=y.y1-n)):(t=d.getScalingParameters(m,v,o,r),d.calculateMarkerBounds(t.scaleFactor*d.config.baseScaleFactor,C,k)),u+=C*(t=d.getScalingParameters(m,v,o,r)).scaleFactor*d.config.baseScaleFactor,f+=k*t.scaleFactor*d.config.baseScaleFactor):t=d.getScalingParameters(m,v,o,r),d.config.scalingParams=t,a=t.scaleFactor,t.translateX+=u,t.translateY=t.translateY+f+c.top||0,t.sFactor=a*d.config.baseScaleFactor*100/100,t.transformStr=["t",t.translateX,",",t.translateY,"s",a,",",a,",0,0"].join(""),d.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:t.translateX?t.translateX:0,grpyshift:t.translateY?t.translateY:0,xscale:100*(a?a*d.config.baseScaleFactor:1),yscale:100*(a?a*d.config.baseScaleFactor:1),scaletext:1,options:{useTracker:!0}},d.getChildren("mapAnnotations")[0].clear(),d.getChildren("mapAnnotations")[0].configureAttributes()}getDataLimits(){let e,t,o,r=this.getDatasets(),a=r.length,n=1/0,i=-1/0;for(o=0;o<a;o++)t=(e=r[o]).getDataLimits(),n=yt(n,t.min),i=Ct(i,t.max);return{dataMin:n,dataMax:i}}getEntityPaths(e){let t,o={},r=this.config.entities;if(e){for(t in r)o[t]=r[t];return o}return r}checkComplete(){let e=this;e.config.entityFlag&&e.config.entitiesReady&&(e.config.entityFlag=!1,e.config.markersDrawn=!0,e.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:e}))}}var wt=xt;o.d(t,"Maps",function(){return wt}),t.default={name:"maps",type:"package",requiresFusionCharts:!0,extension:e=>e.addDep(wt)}}}]);